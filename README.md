# Flow Balance - ä¸ªäººè´¢åŠ¡ç®¡ç†ç³»ç»Ÿ

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/jomonylw/flow-balance)
[![CI](https://github.com/jomonylw/flow-balance/workflows/CI/badge.svg)](https://github.com/jomonylw/flow-balance/actions)
[![Docker Build](https://github.com/jomonylw/flow-balance/workflows/Docker%20Build%20and%20Release/badge.svg)](https://github.com/jomonylw/flow-balance/actions)

## ğŸ“– é¡¹ç›®ç®€ä»‹

Flow
Balance æ˜¯ä¸€ä¸ªåŸºäºç°ä»£ Web æŠ€æœ¯æ ˆå¼€å‘çš„ä¸ªäººè´¢åŠ¡ç®¡ç†ç³»ç»Ÿï¼Œé‡‡ç”¨ä¼ä¸šçº§è´¢åŠ¡ç®¡ç†ç†å¿µï¼Œæ­£ç¡®åŒºåˆ†**å­˜é‡**ï¼ˆèµ„äº§è´Ÿå€ºï¼‰å’Œ**æµé‡**ï¼ˆæ”¶å…¥æ”¯å‡ºï¼‰æ¦‚å¿µï¼Œä¸ºä¸ªäººç”¨æˆ·æä¾›ä¸“ä¸šçº§çš„è´¢åŠ¡åˆ†æå’Œç®¡ç†å·¥å…·ã€‚

### ğŸ¯ æ ¸å¿ƒç†å¿µ

- **å­˜é‡æ¦‚å¿µ**ï¼šèµ„äº§å’Œè´Ÿå€ºè´¦æˆ·åæ˜ ç‰¹å®šæ—¶ç‚¹çš„è´¢åŠ¡çŠ¶å†µ
- **æµé‡æ¦‚å¿µ**ï¼šæ”¶å…¥å’Œæ”¯å‡ºè´¦æˆ·åæ˜ ç‰¹å®šæœŸé—´çš„ç°é‡‘æµåŠ¨
- **ä¸“ä¸šæŠ¥è¡¨**ï¼šæä¾›æ ‡å‡†çš„èµ„äº§è´Ÿå€ºè¡¨å’Œç°é‡‘æµé‡è¡¨
- **å¤šå¸ç§æ”¯æŒ**ï¼šæ”¯æŒå¤šç§è´§å¸å’Œæ±‡ç‡ç®¡ç†
- **æ™ºèƒ½åˆ†æ**ï¼šåŸºäºä¼šè®¡å­¦åŸç†çš„è´¢åŠ¡æ•°æ®åˆ†æ

### âœ¨ ä¸»è¦ç‰¹æ€§

#### ğŸ¦ è´¦æˆ·ç®¡ç†

- **åˆ†ç±»ä½“ç³»**ï¼šæ”¯æŒæ ‘çŠ¶ç»“æ„çš„è´¦æˆ·åˆ†ç±»ç®¡ç†
- **è´¦æˆ·ç±»å‹**ï¼šè‡ªåŠ¨åŒºåˆ†èµ„äº§ã€è´Ÿå€ºã€æ”¶å…¥ã€æ”¯å‡ºå››ç§ç±»å‹
- **å¤šå¸ç§**ï¼šæ¯ä¸ªè´¦æˆ·æ”¯æŒç‹¬ç«‹çš„è´§å¸è®¾ç½®
- **ä½™é¢ç®¡ç†**ï¼šå­˜é‡è´¦æˆ·æ”¯æŒä½™é¢æ›´æ–°ï¼Œæµé‡è´¦æˆ·è®°å½•äº¤æ˜“æµæ°´

#### ğŸ“Š è´¢åŠ¡æŠ¥è¡¨

- **èµ„äº§è´Ÿå€ºè¡¨**ï¼šåæ˜ ç‰¹å®šæ—¶ç‚¹çš„è´¢åŠ¡çŠ¶å†µ
- **ç°é‡‘æµé‡è¡¨**ï¼šåˆ†æç‰¹å®šæœŸé—´çš„ç°é‡‘æµåŠ¨æƒ…å†µ
- **æ™ºèƒ½ç»Ÿè®¡**ï¼šæ ¹æ®è´¦æˆ·ç±»å‹è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ç»Ÿè®¡æ–¹æ³•
- **è¶‹åŠ¿åˆ†æ**ï¼šå¤šæ—¶é—´æ®µçš„è´¢åŠ¡æ•°æ®å¯¹æ¯”åˆ†æ

#### ğŸ’± å¤šå¸ç§æ”¯æŒ

- **è´§å¸ç®¡ç†**ï¼šæ”¯æŒæ·»åŠ å’Œç®¡ç†å¤šç§è´§å¸
- **æ±‡ç‡è®¾ç½®**ï¼šç”¨æˆ·è‡ªå®šä¹‰æ±‡ç‡ç®¡ç†
- **æœ¬ä½å¸è½¬æ¢**ï¼šç»Ÿä¸€è½¬æ¢ä¸ºæœ¬ä½å¸è¿›è¡Œæ±‡æ€»åˆ†æ
- **è´§å¸æ ‡ç­¾**ï¼šç›´è§‚çš„è´§å¸æ ‡è¯†å’Œé¢œè‰²ç¼–ç 

#### ğŸ“± ç”¨æˆ·ä½“éªŒ

- **å“åº”å¼è®¾è®¡**ï¼šå®Œç¾é€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
- **å›½é™…åŒ–**ï¼šæ”¯æŒä¸­æ–‡å’Œè‹±æ–‡åŒè¯­åˆ‡æ¢
- **ä¸»é¢˜åˆ‡æ¢**ï¼šæ”¯æŒæ˜äº®ã€æš—é»‘å’Œç³»ç»Ÿä¸»é¢˜
- **å®æ—¶æ›´æ–°**ï¼šæ•°æ®å˜æ›´å®æ—¶åŒæ­¥åˆ°ç•Œé¢

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯

- **æ¡†æ¶**ï¼šNext.js 15.3.3 (App Router)
- **UIåº“**ï¼šReact 19 + TypeScript
- **æ ·å¼**ï¼šTailwind CSS 4
- **å›¾è¡¨**ï¼šECharts + echarts-for-react
- **å›¾æ ‡**ï¼šLucide React
- **çŠ¶æ€ç®¡ç†**ï¼šReact Context API

### åç«¯æŠ€æœ¯

- **è¿è¡Œæ—¶**ï¼šNode.js
- **æ•°æ®åº“**ï¼šSQLite (å¼€å‘) / PostgreSQL (ç”Ÿäº§)
- **ORM**ï¼šPrisma 6.9.0
- **è®¤è¯**ï¼šJWT + bcryptjs
- **API**ï¼šNext.js API Routes

### å¼€å‘å·¥å…·

- **åŒ…ç®¡ç†å™¨**ï¼špnpm
- **ä»£ç è§„èŒƒ**ï¼šESLint + TypeScript
- **æ„å»ºå·¥å…·**ï¼šNext.js Turbopack
- **å¼€å‘å·¥å…·**ï¼štsx (TypeScriptæ‰§è¡Œå™¨)

### éƒ¨ç½²å’Œè¿ç»´

- **å®¹å™¨åŒ–**ï¼šDocker + Docker Compose
- **CI/CD**ï¼šGitHub Actions è‡ªåŠ¨åŒ–æµæ°´çº¿
- **äº‘éƒ¨ç½²**ï¼šVercel ä¸€é”®éƒ¨ç½²
- **ç›‘æ§**ï¼šå¥åº·æ£€æŸ¥ + æ€§èƒ½ç›‘æ§
- **å¤‡ä»½**ï¼šè‡ªåŠ¨åŒ–æ•°æ®å¤‡ä»½
- **å¤šæ•°æ®åº“**ï¼šSQLite / PostgreSQL æ”¯æŒ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 18.0+
- pnpm 8.0+
- SQLite 3 (å¼€å‘ç¯å¢ƒ) / PostgreSQL 13+ (ç”Ÿäº§ç¯å¢ƒ)
- Docker & Docker Compose (å¯é€‰ï¼Œç”¨äºå®¹å™¨åŒ–éƒ¨ç½²)

### æœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®**

```bash
git clone <repository-url>
cd persional-balance-sheet
```

2. **å®‰è£…ä¾èµ–**

```bash
pnpm install
```

3. **ç¯å¢ƒé…ç½®**

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ–‡ä»¶
cp .env.example .env.local

# ç¼–è¾‘ç¯å¢ƒå˜é‡
# æœ¬åœ°å¼€å‘
# DATABASE_URL="file:./prisma/dev.db"
# Docker éƒ¨ç½²
# DATABASE_URL="file:/app/data/flow-balance.db"
# JWT_SECRET="your-jwt-secret"
```

4. **æ•°æ®åº“è®¾ç½®**

```bash
# ç”ŸæˆPrismaå®¢æˆ·ç«¯
pnpm db:generate

# è¿è¡Œæ•°æ®åº“è¿ç§»
pnpm db:migrate

# å¡«å……ç§å­æ•°æ®ï¼ˆå¯é€‰ï¼‰
pnpm db:seed
```

5. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**

```bash
pnpm dev
```

è®¿é—® http://localhost:3000 å¼€å§‹ä½¿ç”¨ã€‚

### ğŸš€ ä¸€é”®éƒ¨ç½²

#### å¿«é€Ÿå¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# äº¤äº’å¼å¿«é€Ÿéƒ¨ç½²
./scripts/quick-start.sh

# æˆ–ä½¿ç”¨ Makefile
make quick-start
```

#### GitHub éƒ¨ç½²ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/jomonylw/flow-balance)

```bash
# 1. Fork æˆ–å…‹éš†é¡¹ç›®åˆ°æ‚¨çš„ GitHub
# 2. æŒ‰ç…§åˆ†æ­¥æŒ‡å—é…ç½® CI/CD
# 3. è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ Docker é•œåƒ
```

ğŸ“š **è¯¦ç»†æŒ‡å—**: [GitHub è®¾ç½®å’Œ CI/CD é…ç½®æŒ‡å—](docs/GITHUB_SETUP_GUIDE.md)

#### ä½¿ç”¨ Makefile å‘½ä»¤

```bash
# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
make help

# å¼€å‘ç¯å¢ƒ
make dev                # æœ¬åœ°å¼€å‘
make docker-dev         # Docker å¼€å‘ç¯å¢ƒ

# ç”Ÿäº§éƒ¨ç½²
make docker-prod        # Docker ç”Ÿäº§ç¯å¢ƒ
make deploy:vercel      # Vercel éƒ¨ç½²

# ç›‘æ§å’Œç»´æŠ¤
make health            # å¥åº·æ£€æŸ¥
make monitor           # å¯åŠ¨ç›‘æ§
make backup            # æ•°æ®å¤‡ä»½
```

### Docker å¿«é€Ÿéƒ¨ç½²

> ğŸ¯ **æ–°ç‰¹æ€§**ï¼šFlow Balance ç°åœ¨æ”¯æŒ**åŠ¨æ€æ•°æ®åº“æ£€æµ‹**ï¼åŒä¸€ä¸ª Docker é•œåƒå¯ä»¥æ ¹æ® `DATABASE_URL`
> è‡ªåŠ¨é€‰æ‹© SQLite æˆ– PostgreSQLã€‚

#### ğŸš€ ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
# SQLite æ¨¡å¼ï¼ˆé€‚åˆä¸ªäººä½¿ç”¨ï¼‰
docker run -d \
  --name flow-balance \
  -p 3000:3000 \
  -e DATABASE_URL="file:/app/data/flow-balance.db" \
  -v flow-balance-data:/app/data \
  --restart unless-stopped \
  jomonylw/flow-balance:latest

# PostgreSQL æ¨¡å¼ï¼ˆé€‚åˆç”Ÿäº§ç¯å¢ƒï¼‰
docker run -d \
  --name flow-balance \
  -p 3000:3000 \
  -e DATABASE_URL="postgresql://user:password@host:5432/dbname" \
  --restart unless-stopped \
  jomonylw/flow-balance:latest
```

#### ğŸ“‹ ä½¿ç”¨ Docker Compose

**SQLite ç‰ˆæœ¬ï¼ˆå•æœºéƒ¨ç½²ï¼‰**

```bash
# 1. åˆ›å»º docker-compose.yml
cat > docker-compose.yml << EOF
version: '3.8'
services:
  flow-balance:
    image: jomonylw/flow-balance:latest
    ports:
      - "3000:3000"
    environment:
      - DATABASE_URL=file:/app/data/flow-balance.db
    volumes:
      - flow-balance-data:/app/data
    restart: unless-stopped

volumes:
  flow-balance-data:
EOF

# 2. å¯åŠ¨æœåŠ¡
docker-compose up -d
```

**PostgreSQL ç‰ˆæœ¬ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰**

```bash
# 1. åˆ›å»º docker-compose.yml
cat > docker-compose.yml << EOF
version: '3.8'
services:
  flow-balance:
    image: jomonylw/flow-balance:latest
    ports:
      - "3000:3000"
    environment:
      - DATABASE_URL=postgresql://flowbalance:secure_password@postgres:5432/flowbalance
    depends_on:
      - postgres
    restart: unless-stopped

  postgres:
    image: postgres:15-alpine
    environment:
      - POSTGRES_DB=flowbalance
      - POSTGRES_USER=flowbalance
      - POSTGRES_PASSWORD=secure_password
    volumes:
      - postgres-data:/var/lib/postgresql/data
    restart: unless-stopped

volumes:
  postgres-data:
EOF

# 2. å¯åŠ¨æœåŠ¡
docker-compose up -d
```

#### ğŸ› ï¸ ä»æºç æ„å»º

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/jomonylw/flow-balance.git
cd flow-balance

# 2. æ„å»ºé•œåƒï¼ˆæ”¯æŒåŠ¨æ€æ•°æ®åº“æ£€æµ‹ï¼‰
./scripts/docker-build.sh

# 3. å¯åŠ¨å®¹å™¨
docker run -d \
  --name flow-balance \
  -p 3000:3000 \
  -e DATABASE_URL="file:/app/data/flow-balance.db" \
  -v flow-balance-data:/app/data \
  flow-balance:latest
```

ğŸ“– **è¯¦ç»†æ–‡æ¡£**ï¼š[åŠ¨æ€æ•°æ®åº“ä½¿ç”¨æŒ‡å—](DYNAMIC_DATABASE_USAGE.md)

### æ•°æ®åº“ç®¡ç†

#### ğŸ¯ åŠ¨æ€æ•°æ®åº“æ”¯æŒ

Flow Balance æ”¯æŒè¿è¡Œæ—¶è‡ªåŠ¨æ£€æµ‹æ•°æ®åº“ç±»å‹ï¼š

| DATABASE_URL æ ¼å¼         | è‡ªåŠ¨é€‰æ‹©   | é€‚ç”¨åœºæ™¯           |
| ------------------------- | ---------- | ------------------ |
| `file:/path/to/db.sqlite` | SQLite     | ä¸ªäººä½¿ç”¨ã€å¼€å‘ç¯å¢ƒ |
| `postgresql://...`        | PostgreSQL | ç”Ÿäº§ç¯å¢ƒã€å¤šç”¨æˆ·   |

#### ğŸ“‹ ç®¡ç†å‘½ä»¤

```bash
# é‡ç½®æ•°æ®åº“
pnpm db:reset

# æŸ¥çœ‹æ•°æ®åº“
pnpm db:studio

# æ‰‹åŠ¨åˆ‡æ¢æ•°æ®åº“ç±»å‹ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
node scripts/switch-database.js postgresql  # åˆ‡æ¢åˆ° PostgreSQL
node scripts/switch-database.js sqlite      # åˆ‡æ¢åˆ° SQLite

# æµ‹è¯•åŠ¨æ€æ£€æµ‹åŠŸèƒ½
./scripts/test-dynamic-db.sh
```

## ğŸ“‹ é¡¹ç›®ç»“æ„

```
persional-balance-sheet/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ (auth)/            # è®¤è¯è·¯ç”±ç»„
â”‚   â”‚   â”‚   â”œâ”€â”€ login/         # ç™»å½•é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ signup/        # æ³¨å†Œé¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ forgot-password/ # å¿˜è®°å¯†ç 
â”‚   â”‚   â”œâ”€â”€ (app)/             # ä¸»åº”ç”¨è·¯ç”±ç»„
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/     # ä»ªè¡¨æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ accounts/      # è´¦æˆ·ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ categories/    # åˆ†ç±»ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ transactions/  # äº¤æ˜“ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ reports/       # è´¢åŠ¡æŠ¥è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ fire/          # FIREè®¡ç®—å™¨
â”‚   â”‚   â”‚   â””â”€â”€ settings/      # ç”¨æˆ·è®¾ç½®
â”‚   â”‚   â”œâ”€â”€ api/               # APIè·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ v1/           # APIç‰ˆæœ¬æ§åˆ¶
â”‚   â”‚   â”‚   â””â”€â”€ middleware.ts  # APIä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ globals.css        # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ components/            # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/               # åŸºç¡€UIç»„ä»¶åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ forms/        # è¡¨å•ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ feedback/     # åé¦ˆç»„ä»¶(Toast, Modalç­‰)
â”‚   â”‚   â”‚   â”œâ”€â”€ navigation/   # å¯¼èˆªç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ data-display/ # æ•°æ®å±•ç¤ºç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ layout/       # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ features/         # åŠŸèƒ½æ¨¡å—ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/         # è®¤è¯åŠŸèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/    # ä»ªè¡¨æ¿åŠŸèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ accounts/     # è´¦æˆ·åŠŸèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ categories/   # åˆ†ç±»åŠŸèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ transactions/ # äº¤æ˜“åŠŸèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ reports/      # æŠ¥è¡¨åŠŸèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ fire/         # FIREåŠŸèƒ½
â”‚   â”‚   â”‚   â””â”€â”€ settings/     # è®¾ç½®åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ charts/           # å›¾è¡¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ layout/           # å…¨å±€å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ lib/                  # æ ¸å¿ƒåº“æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ api/              # APIç›¸å…³
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts     # APIå®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ types.ts      # APIç±»å‹
â”‚   â”‚   â”‚   â””â”€â”€ endpoints.ts  # APIç«¯ç‚¹
â”‚   â”‚   â”œâ”€â”€ database/         # æ•°æ®åº“ç›¸å…³
â”‚   â”‚   â”‚   â”œâ”€â”€ prisma.ts     # Prismaå®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ queries/      # æ•°æ®åº“æŸ¥è¯¢
â”‚   â”‚   â”‚   â””â”€â”€ migrations/   # æ•°æ®è¿ç§»è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ services/         # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts       # è®¤è¯æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ currency.ts   # è´§å¸æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ account.ts    # è´¦æˆ·æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ transaction.ts # äº¤æ˜“æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ format.ts     # æ ¼å¼åŒ–å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ validation.ts # éªŒè¯å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ date.ts       # æ—¥æœŸå·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ currency.ts   # è´§å¸å·¥å…·
â”‚   â”‚   â””â”€â”€ constants/        # å¸¸é‡å®šä¹‰
â”‚   â”‚       â”œâ”€â”€ api.ts        # APIå¸¸é‡
â”‚   â”‚       â”œâ”€â”€ ui.ts         # UIå¸¸é‡
â”‚   â”‚       â””â”€â”€ business.ts   # ä¸šåŠ¡å¸¸é‡
â”‚   â”œâ”€â”€ types/                # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ api/              # APIç±»å‹
â”‚   â”‚   â”œâ”€â”€ database/         # æ•°æ®åº“ç±»å‹
â”‚   â”‚   â”œâ”€â”€ ui/               # UIç±»å‹
â”‚   â”‚   â””â”€â”€ business/         # ä¸šåŠ¡ç±»å‹
â”‚   â”œâ”€â”€ hooks/                # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â”œâ”€â”€ api/              # APIç›¸å…³Hooks
â”‚   â”‚   â”œâ”€â”€ ui/               # UIç›¸å…³Hooks
â”‚   â”‚   â””â”€â”€ business/         # ä¸šåŠ¡ç›¸å…³Hooks
â”‚   â”œâ”€â”€ contexts/             # React Context
â”‚   â”‚   â”œâ”€â”€ providers/        # Contextæä¾›è€…
â”‚   â”‚   â””â”€â”€ types.ts          # Contextç±»å‹
â”‚   â”œâ”€â”€ styles/               # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ globals.css       # å…¨å±€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ components.css    # ç»„ä»¶æ ·å¼
â”‚   â”‚   â””â”€â”€ themes/           # ä¸»é¢˜æ ·å¼
â”‚   â””â”€â”€ config/               # é…ç½®æ–‡ä»¶
â”‚       â”œâ”€â”€ database.ts       # æ•°æ®åº“é…ç½®
â”‚       â”œâ”€â”€ auth.ts           # è®¤è¯é…ç½®
â”‚       â””â”€â”€ app.ts            # åº”ç”¨é…ç½®
â”‚   â”œâ”€â”€ lib/                  # å·¥å…·åº“
â”‚   â””â”€â”€ types/                # TypeScriptç±»å‹å®šä¹‰
â”œâ”€â”€ prisma/                   # æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ schema.prisma         # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ migrations/           # æ•°æ®åº“è¿ç§»
â”‚   â””â”€â”€ seed.ts              # ç§å­æ•°æ®
â”œâ”€â”€ public/                   # é™æ€èµ„æº
â”‚   â””â”€â”€ locales/             # å›½é™…åŒ–æ–‡ä»¶
â”œâ”€â”€ docs/                     # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ DEVELOPMENT_STANDARDS.md    # å¼€å‘è§„èŒƒä¸è´¨é‡ä¿è¯æŒ‡å—
â”‚   â”œâ”€â”€ QUICK_REFERENCE.md          # å¸¸ç”¨å‘½ä»¤å’Œå¿«é€Ÿå‚è€ƒ
â”‚   â”œâ”€â”€ CODE_REVIEW_CHECKLIST.md    # ä»£ç å®¡æŸ¥æ£€æŸ¥æ¸…å•
â”‚   â”œâ”€â”€ PROJECT_CONFIGURATION.md    # é¡¹ç›®é…ç½®è¯¦è§£
â”‚   â”œâ”€â”€ CODING_STANDARDS.md         # ä»£ç è§„èŒƒè¯¦ç»†è¯´æ˜
â”‚   â””â”€â”€ API_DOCUMENTATION.md        # API æ¥å£æ–‡æ¡£
â””â”€â”€ scripts/                  # å·¥å…·è„šæœ¬
    â”œâ”€â”€ smart-lint-fix.js           # æ™ºèƒ½ä¿®å¤ lint é”™è¯¯
    â”œâ”€â”€ type-check.js               # è¯¦ç»†ç±»å‹æ£€æŸ¥
    â”œâ”€â”€ analyze-type-usage.js       # ç±»å‹ä½¿ç”¨åˆ†æ
    â””â”€â”€ fix-console-logs.js         # ä¿®å¤ console è¯­å¥
```

---

# ğŸ“š è¯¦ç»†åŠŸèƒ½è¯´æ˜

## 1. ç”¨æˆ·è®¤è¯ç³»ç»Ÿ

### 1.1 ç”¨æˆ·æ³¨å†Œ

- **åŠŸèƒ½æè¿°**ï¼šæ–°ç”¨æˆ·è´¦æˆ·åˆ›å»º
- **å®ç°ä½ç½®**ï¼š`/auth/signup`
- **æ ¸å¿ƒç‰¹æ€§**ï¼š
  - é‚®ç®±å”¯ä¸€æ€§éªŒè¯
  - å¯†ç å¼ºåº¦æ£€æŸ¥
  - å¯†ç ç¡®è®¤éªŒè¯
  - è‡ªåŠ¨è·³è½¬åˆ°åˆå§‹è®¾ç½®

### 1.2 ç”¨æˆ·ç™»å½•

- **åŠŸèƒ½æè¿°**ï¼šç”¨æˆ·èº«ä»½éªŒè¯
- **å®ç°ä½ç½®**ï¼š`/auth/login`
- **æ ¸å¿ƒç‰¹æ€§**ï¼š
  - JWTä»¤ç‰Œè®¤è¯
  - è®°ä½ç™»å½•çŠ¶æ€
  - è‡ªåŠ¨é‡å®šå‘åˆ°ä»ªè¡¨æ¿
  - æ”¯æŒåˆå§‹è®¾ç½®è·³è½¬

### 1.3 å¯†ç é‡ç½®

- **åŠŸèƒ½æè¿°**ï¼šå¿˜è®°å¯†ç æ¢å¤
- **å®ç°ä½ç½®**ï¼š`/auth/forgot-password`, `/auth/reset-password`
- **æ ¸å¿ƒç‰¹æ€§**ï¼š
  - é‚®ç®±éªŒè¯
  - å®‰å…¨ä»¤ç‰Œç”Ÿæˆ
  - ä»¤ç‰Œè¿‡æœŸæœºåˆ¶
  - å¯†ç é‡ç½®ç¡®è®¤

### 1.4 ä¼šè¯ç®¡ç†

- **åŠŸèƒ½æè¿°**ï¼šç”¨æˆ·ä¼šè¯çŠ¶æ€ç®¡ç†
- **æŠ€æœ¯å®ç°**ï¼š
  - HTTP-only Cookieå­˜å‚¨JWT
  - è‡ªåŠ¨ä»¤ç‰Œåˆ·æ–°
  - å®‰å…¨ç™»å‡º
  - ä¼šè¯è¿‡æœŸå¤„ç†

## 2. åˆå§‹è®¾ç½®ç³»ç»Ÿ

### 2.1 è´§å¸é€‰æ‹©

- **åŠŸèƒ½æè¿°**ï¼šç”¨æˆ·å¯ç”¨è´§å¸é…ç½®
- **å®ç°ä½ç½®**ï¼š`/setup`
- **æ ¸å¿ƒç‰¹æ€§**ï¼š
  - å…¨çƒè´§å¸åˆ—è¡¨
  - å¸¸ç”¨è´§å¸æ¨è
  - å¤šé€‰è´§å¸æ”¯æŒ
  - è´§å¸æœç´¢åŠŸèƒ½

### 2.2 æœ¬ä½å¸è®¾ç½®

- **åŠŸèƒ½æè¿°**ï¼šä¸»è¦è´§å¸é€‰æ‹©
- **æ ¸å¿ƒç‰¹æ€§**ï¼š
  - ä»å¯ç”¨è´§å¸ä¸­é€‰æ‹©
  - æ±‡æ€»è®¡ç®—åŸºå‡†
  - æŠ¥è¡¨æ˜¾ç¤ºè´§å¸
  - åç»­å¯ä¿®æ”¹

### 2.3 è®¾ç½®å®Œæˆ

- **åŠŸèƒ½æè¿°**ï¼šåˆå§‹é…ç½®ç¡®è®¤
- **æ ¸å¿ƒç‰¹æ€§**ï¼š
  - è®¾ç½®éªŒè¯
  - é»˜è®¤åˆ†ç±»åˆ›å»º
  - ç”¨æˆ·å¼•å¯¼
  - è‡ªåŠ¨è·³è½¬ä»ªè¡¨æ¿

## 3. ä»ªè¡¨æ¿ç³»ç»Ÿ

### 3.1 è´¢åŠ¡æ¦‚è§ˆ

- **åŠŸèƒ½æè¿°**ï¼šæ ¸å¿ƒè´¢åŠ¡æŒ‡æ ‡å±•ç¤º
- **å®ç°ä½ç½®**ï¼š`/dashboard`
- **æ ¸å¿ƒæŒ‡æ ‡**ï¼š
  - å‡€èµ„äº§æ€»é¢ï¼ˆæœ¬ä½å¸ï¼‰
  - æ€»èµ„äº§é‡‘é¢
  - æ€»è´Ÿå€ºé‡‘é¢
  - æœ¬æœˆæ”¶æ”¯æƒ…å†µ

### 3.2 è´¦æˆ·æ±‡æ€»

- **åŠŸèƒ½æè¿°**ï¼šè´¦æˆ·ä½™é¢å¿«é€ŸæŸ¥çœ‹
- **æ ¸å¿ƒç‰¹æ€§**ï¼š
  - æŒ‰åˆ†ç±»åˆ†ç»„æ˜¾ç¤º
  - å¤šå¸ç§ä½™é¢æ±‡æ€»
  - å®æ—¶ä½™é¢æ›´æ–°
  - å¿«é€Ÿæ“ä½œå…¥å£

### 3.3 è¶‹åŠ¿å›¾è¡¨

- **åŠŸèƒ½æè¿°**ï¼šè´¢åŠ¡è¶‹åŠ¿å¯è§†åŒ–
- **å›¾è¡¨ç±»å‹**ï¼š
  - **å‡€èµ„äº§è¶‹åŠ¿å›¾**ï¼šæ˜¾ç¤ºèµ„äº§å‡€å€¼å˜åŒ–
  - **ç°é‡‘æµå›¾è¡¨**ï¼šæ˜¾ç¤ºæ”¶æ”¯æµé‡å˜åŒ–
  - **åˆ†ç±»åˆ†å¸ƒå›¾**ï¼šæ˜¾ç¤ºèµ„äº§/è´Ÿå€ºåˆ†å¸ƒ
  - **æœˆåº¦å¯¹æ¯”å›¾**ï¼šæ˜¾ç¤ºæœˆåº¦è´¢åŠ¡å˜åŒ–

### 3.4 å¿«é€Ÿæ“ä½œ

- **åŠŸèƒ½æè¿°**ï¼šå¸¸ç”¨æ“ä½œå¿«æ·å…¥å£
- **æ“ä½œç±»å‹**ï¼š
  - æ·»åŠ äº¤æ˜“è®°å½•
  - æ›´æ–°è´¦æˆ·ä½™é¢
  - åˆ›å»ºæ–°è´¦æˆ·
  - æŸ¥çœ‹è¯¦ç»†æŠ¥è¡¨

### 3.5 æ•°æ®éªŒè¯

- **åŠŸèƒ½æè¿°**ï¼šæ•°æ®è´¨é‡æ£€æŸ¥
- **éªŒè¯é¡¹ç›®**ï¼š
  - è´¦æˆ·ç±»å‹è®¾ç½®å®Œæ•´æ€§
  - äº¤æ˜“æ•°æ®ä¸€è‡´æ€§
  - æ±‡ç‡è®¾ç½®å®Œæ•´æ€§
  - åˆ†ç±»é…ç½®åˆç†æ€§

## 4. è´¦æˆ·ç®¡ç†ç³»ç»Ÿ

### 4.1 è´¦æˆ·åˆ†ç±»ç®¡ç†

#### 4.1.1 åˆ†ç±»æ ‘ç»“æ„

- **åŠŸèƒ½æè¿°**ï¼šå±‚çº§åˆ†ç±»ç»„ç»‡
- **å®ç°ä½ç½®**ï¼š`/categories`
- **æ ¸å¿ƒç‰¹æ€§**ï¼š
  - æ— é™å±‚çº§æ”¯æŒ
  - æ‹–æ‹½æ’åº
  - å±•å¼€/æŠ˜å æ§åˆ¶
  - æ‰¹é‡æ“ä½œ

#### 4.1.2 è´¦æˆ·ç±»å‹

- **èµ„äº§ç±»ï¼ˆASSETï¼‰**ï¼š

  - ç°é‡‘è´¦æˆ·
  - é“¶è¡Œå­˜æ¬¾
  - æŠ•èµ„è´¦æˆ·
  - å›ºå®šèµ„äº§

- **è´Ÿå€ºç±»ï¼ˆLIABILITYï¼‰**ï¼š

  - ä¿¡ç”¨å¡
  - è´·æ¬¾
  - åº”ä»˜æ¬¾é¡¹

- **æ”¶å…¥ç±»ï¼ˆINCOMEï¼‰**ï¼š

  - å·¥èµ„æ”¶å…¥
  - æŠ•èµ„æ”¶ç›Š
  - å…¶ä»–æ”¶å…¥

- **æ”¯å‡ºç±»ï¼ˆEXPENSEï¼‰**ï¼š
  - ç”Ÿæ´»è´¹ç”¨
  - å¨±ä¹æ¶ˆè´¹
  - äº¤é€šè´¹ç”¨

#### 4.1.3 åˆ†ç±»æ“ä½œ

- **åˆ›å»ºåˆ†ç±»**ï¼š

  - åˆ†ç±»åç§°è®¾ç½®
  - çˆ¶åˆ†ç±»é€‰æ‹©
  - è´¦æˆ·ç±»å‹æŒ‡å®š
  - æ’åºæƒé‡è®¾ç½®

- **ç¼–è¾‘åˆ†ç±»**ï¼š
  - åç§°ä¿®æ”¹
  - ç±»å‹è°ƒæ•´
  - å±‚çº§ç§»åŠ¨
  - åˆ é™¤ä¿æŠ¤

### 4.2 è´¦æˆ·ç®¡ç†

#### 4.2.1 è´¦æˆ·åˆ›å»º

- **åŠŸèƒ½æè¿°**ï¼šæ–°å»ºè´¦æˆ·
- **å¿…å¡«ä¿¡æ¯**ï¼š
  - è´¦æˆ·åç§°ï¼ˆç”¨æˆ·å†…å”¯ä¸€ï¼‰
  - æ‰€å±åˆ†ç±»
  - è´¦æˆ·è´§å¸
  - è´¦æˆ·æè¿°ï¼ˆå¯é€‰ï¼‰

#### 4.2.2 è´¦æˆ·é…ç½®

- **è´§å¸è®¾ç½®**ï¼š

  - å•ä¸€è´§å¸é™åˆ¶
  - è´§å¸ä¸å¯å˜æ›´ï¼ˆæœ‰äº¤æ˜“åï¼‰
  - æ”¯æŒç”¨æˆ·å¯ç”¨è´§å¸

- **æ˜¾ç¤ºè®¾ç½®**ï¼š
  - è´¦æˆ·é¢œè‰²
  - å›¾æ ‡é€‰æ‹©
  - æ’åºæƒé‡

#### 4.2.3 è´¦æˆ·æ“ä½œ

- **å­˜é‡ç±»è´¦æˆ·**ï¼š

  - ä¸»æ“ä½œï¼šæ›´æ–°ä½™é¢
  - æ¬¡æ“ä½œï¼šæŸ¥çœ‹äº¤æ˜“è®°å½•
  - ç‰¹ç‚¹ï¼šå…³æ³¨æ—¶ç‚¹ä½™é¢

- **æµé‡ç±»è´¦æˆ·**ï¼š
  - ä¸»æ“ä½œï¼šæ·»åŠ äº¤æ˜“
  - ç‰¹ç‚¹ï¼šå…³æ³¨æœŸé—´æµé‡

### 4.3 è´¦æˆ·è¯¦æƒ…é¡µé¢

#### 4.3.1 å­˜é‡ç±»è´¦æˆ·è¯¦æƒ…

- **å®ç°ç»„ä»¶**ï¼š`StockAccountDetailView`
- **å±•ç¤ºå†…å®¹**ï¼š
  - å½“å‰ä½™é¢
  - ä½™é¢å˜åŒ–è¶‹åŠ¿
  - å†å²ä½™é¢è®°å½•
  - ä½™é¢æ›´æ–°æ“ä½œ

#### 4.3.2 æµé‡ç±»è´¦æˆ·è¯¦æƒ…

- **å®ç°ç»„ä»¶**ï¼š`FlowAccountDetailView`
- **å±•ç¤ºå†…å®¹**ï¼š
  - ç´¯è®¡æµé‡
  - æœŸé—´æµé‡ç»Ÿè®¡
  - äº¤æ˜“æ˜ç»†åˆ—è¡¨
  - æ·»åŠ äº¤æ˜“æ“ä½œ

#### 4.3.3 é€šç”¨åŠŸèƒ½

- **äº¤æ˜“åˆ—è¡¨**ï¼š

  - åˆ†é¡µæ˜¾ç¤ºï¼ˆ10æ¡/é¡µï¼‰
  - ç­›é€‰å’Œæœç´¢
  - æ’åºåŠŸèƒ½
  - æ‰¹é‡æ“ä½œ

- **ç»Ÿè®¡å›¾è¡¨**ï¼š
  - ä½™é¢/æµé‡è¶‹åŠ¿å›¾
  - æœˆåº¦ç»Ÿè®¡å›¾
  - åˆ†ç±»åˆ†å¸ƒå›¾

## 5. äº¤æ˜“ç®¡ç†ç³»ç»Ÿ

### 5.1 äº¤æ˜“ç±»å‹

#### 5.1.1 åŸºç¡€äº¤æ˜“ç±»å‹

- **æ”¶å…¥äº¤æ˜“ï¼ˆINCOMEï¼‰**ï¼š

  - å¢åŠ èµ„äº§è´¦æˆ·ä½™é¢
  - å‡å°‘è´Ÿå€ºè´¦æˆ·ä½™é¢
  - è®°å½•æ”¶å…¥ç±»è´¦æˆ·æµé‡

- **æ”¯å‡ºäº¤æ˜“ï¼ˆEXPENSEï¼‰**ï¼š

  - å‡å°‘èµ„äº§è´¦æˆ·ä½™é¢
  - å¢åŠ è´Ÿå€ºè´¦æˆ·ä½™é¢
  - è®°å½•æ”¯å‡ºç±»è´¦æˆ·æµé‡

- **ä½™é¢è°ƒæ•´ï¼ˆBALANCEï¼‰**ï¼š
  - ä»…ç”¨äºå­˜é‡ç±»è´¦æˆ·
  - è°ƒæ•´è´¦æˆ·ä½™é¢åˆ°å‡†ç¡®å€¼
  - è‡ªåŠ¨è®¡ç®—è°ƒæ•´é‡‘é¢

#### 5.1.2 äº¤æ˜“éªŒè¯è§„åˆ™

- **è´¦æˆ·ç±»å‹åŒ¹é…**ï¼š

  - èµ„äº§/è´Ÿå€ºè´¦æˆ·ï¼šæ”¯æŒæ‰€æœ‰äº¤æ˜“ç±»å‹
  - æ”¶å…¥è´¦æˆ·ï¼šä»…æ”¯æŒæ”¶å…¥äº¤æ˜“
  - æ”¯å‡ºè´¦æˆ·ï¼šä»…æ”¯æŒæ”¯å‡ºäº¤æ˜“

- **è´§å¸ä¸€è‡´æ€§**ï¼š
  - äº¤æ˜“è´§å¸å¿…é¡»ä¸è´¦æˆ·è´§å¸ä¸€è‡´
  - ä¸æ”¯æŒè·¨è´§å¸äº¤æ˜“
  - æ±‡ç‡è½¬æ¢åœ¨ç»Ÿè®¡å±‚é¢å¤„ç†

### 5.2 äº¤æ˜“åˆ›å»º

#### 5.2.1 äº¤æ˜“è¡¨å•

- **å®ç°ç»„ä»¶**ï¼š`TransactionFormModal`
- **å¿…å¡«å­—æ®µ**ï¼š
  - äº¤æ˜“é‡‘é¢
  - äº¤æ˜“ç±»å‹
  - æ‰€å±è´¦æˆ·
  - äº¤æ˜“æ—¥æœŸ
  - äº¤æ˜“æè¿°

#### 5.2.2 é«˜çº§åŠŸèƒ½

- **æ ‡ç­¾ç³»ç»Ÿ**ï¼š

  - å¤šæ ‡ç­¾æ”¯æŒ
  - æ ‡ç­¾é¢œè‰²ç¼–ç 
  - æ ‡ç­¾æœç´¢ç­›é€‰

- **å¤‡æ³¨ä¿¡æ¯**ï¼š
  - è¯¦ç»†äº¤æ˜“è¯´æ˜
  - é™„åŠ ä¿¡æ¯è®°å½•

### 5.3 ä½™é¢æ›´æ–°åŠŸèƒ½

#### 5.3.1 ä½™é¢æ›´æ–°æ¨¡å¼

- **é€‚ç”¨è´¦æˆ·**ï¼šä»…å­˜é‡ç±»è´¦æˆ·ï¼ˆèµ„äº§/è´Ÿå€ºï¼‰
- **å®ç°ç»„ä»¶**ï¼š`BalanceUpdateModal`
- **æ“ä½œæ–¹å¼**ï¼š
  - ç›´æ¥è®¾ç½®æ–°ä½™é¢
  - ç³»ç»Ÿè‡ªåŠ¨è®¡ç®—è°ƒæ•´é‡‘é¢
  - åˆ›å»ºè°ƒæ•´äº¤æ˜“è®°å½•

#### 5.3.2 ä½¿ç”¨åœºæ™¯

- **é“¶è¡Œå¯¹è´¦**ï¼šæ ¹æ®é“¶è¡Œè´¦å•æ›´æ–°ä½™é¢
- **æŠ•èµ„è´¦æˆ·**ï¼šæ ¹æ®å¸‚å€¼å˜åŒ–æ›´æ–°ä½™é¢
- **ä¿¡ç”¨å¡è´¦å•**ï¼šæ ¹æ®è´¦å•æ›´æ–°è´Ÿå€ºä½™é¢

### 5.4 äº¤æ˜“åˆ—è¡¨ç®¡ç†

#### 5.4.1 åˆ—è¡¨åŠŸèƒ½

- **åˆ†é¡µæ˜¾ç¤º**ï¼šæ¯é¡µ10æ¡è®°å½•
- **æ’åºåŠŸèƒ½**ï¼šæŒ‰æ—¥æœŸã€é‡‘é¢ã€ç±»å‹æ’åº
- **ç­›é€‰åŠŸèƒ½**ï¼š
  - æŒ‰äº¤æ˜“ç±»å‹ç­›é€‰
  - æŒ‰æ—¥æœŸèŒƒå›´ç­›é€‰
  - æŒ‰æ ‡ç­¾ç­›é€‰
  - æŒ‰é‡‘é¢èŒƒå›´ç­›é€‰

#### 5.4.2 æ‰¹é‡æ“ä½œ

- **æ‰¹é‡åˆ é™¤**ï¼šé€‰æ‹©å¤šæ¡è®°å½•åˆ é™¤
- **æ‰¹é‡ç¼–è¾‘**ï¼šæ‰¹é‡ä¿®æ”¹æ ‡ç­¾ã€åˆ†ç±»
- **æ‰¹é‡å¯¼å‡º**ï¼šå¯¼å‡ºä¸ºCSV/Excelæ ¼å¼

## 6. å¤šå¸ç§ç³»ç»Ÿ

### 6.1 è´§å¸ç®¡ç†

#### 6.1.1 å…¨çƒè´§å¸æ”¯æŒ

- **é¢„ç½®è´§å¸**ï¼š

  - ä¸»è¦å›½é™…è´§å¸ï¼ˆUSD, EUR, GBP, JPYç­‰ï¼‰
  - ä¸­å›½è´§å¸ï¼ˆCNYï¼‰
  - å…¶ä»–å¸¸ç”¨è´§å¸

- **è‡ªå®šä¹‰è´§å¸**ï¼š
  - ç”¨æˆ·åˆ›å»ºä¸“å±è´§å¸
  - è‡ªå®šä¹‰è´§å¸ç¬¦å·
  - è´§å¸åç§°è®¾ç½®

#### 6.1.2 ç”¨æˆ·å¯ç”¨è´§å¸

- **ç®¡ç†æœºåˆ¶**ï¼š

  - ç”¨æˆ·é€‰æ‹©å¯ç”¨è´§å¸åˆ—è¡¨
  - ç®€åŒ–ç•Œé¢æ˜¾ç¤º
  - é¿å…è´§å¸æ··ä¹±

- **è´§å¸çŠ¶æ€**ï¼š
  - å¯ç”¨/ç¦ç”¨çŠ¶æ€
  - æ˜¾ç¤ºé¡ºåºè®¾ç½®
  - ä½¿ç”¨é¢‘ç‡ç»Ÿè®¡

### 6.2 æ±‡ç‡ç®¡ç†

#### 6.2.1 æ±‡ç‡è®¾ç½®

- **å®ç°ä½ç½®**ï¼š`/settings` - æ±‡ç‡ç®¡ç†æ ‡ç­¾
- **è®¾ç½®æ–¹å¼**ï¼š
  - æ‰‹åŠ¨è¾“å…¥æ±‡ç‡
  - è®¾ç½®ç”Ÿæ•ˆæ—¥æœŸ
  - æ·»åŠ å¤‡æ³¨è¯´æ˜

#### 6.2.2 æ±‡ç‡åº”ç”¨

- **è½¬æ¢æ–¹å‘**ï¼šä¸»è¦è®¾ç½®å…¶ä»–è´§å¸åˆ°æœ¬ä½å¸çš„æ±‡ç‡
- **åº”ç”¨èŒƒå›´**ï¼š
  - ä»ªè¡¨æ¿æ±‡æ€»ç»Ÿè®¡
  - è´¢åŠ¡æŠ¥è¡¨ç”Ÿæˆ
  - è·¨è´§å¸å¯¹æ¯”åˆ†æ

#### 6.2.3 æ±‡ç‡æé†’

- **ç¼ºå¤±æ£€æµ‹**ï¼šè‡ªåŠ¨æ£€æµ‹ç¼ºå¤±çš„æ±‡ç‡è®¾ç½®
- **Dashboardæé†’**ï¼šåœ¨ä»ªè¡¨æ¿æ˜¾ç¤ºè®¾ç½®æé†’
- **å¼•å¯¼è®¾ç½®**ï¼šä¸€é”®è·³è½¬åˆ°æ±‡ç‡è®¾ç½®é¡µé¢

### 6.3 è´§å¸è½¬æ¢

#### 6.3.1 è½¬æ¢é€»è¾‘

- **å®ç°æœåŠ¡**ï¼š`src/lib/currency-conversion.ts`
- **è½¬æ¢æ–¹å¼**ï¼š
  - å•ä¸ªé‡‘é¢è½¬æ¢
  - æ‰¹é‡é‡‘é¢è½¬æ¢
  - å®æ—¶æ±‡ç‡åº”ç”¨

#### 6.3.2 æ˜¾ç¤ºç­–ç•¥

- **åŸå§‹é‡‘é¢**ï¼šæ˜¾ç¤ºäº¤æ˜“åŸå§‹è´§å¸å’Œé‡‘é¢
- **è½¬æ¢é‡‘é¢**ï¼šæ˜¾ç¤ºæœ¬ä½å¸ç­‰å€¼é‡‘é¢
- **æ±‡ç‡ä¿¡æ¯**ï¼šé€æ˜æ˜¾ç¤ºä½¿ç”¨çš„æ±‡ç‡

## 7. è´¢åŠ¡æŠ¥è¡¨ç³»ç»Ÿ

### 7.1 èµ„äº§è´Ÿå€ºè¡¨

#### 7.1.1 æŠ¥è¡¨ç»“æ„

- **å®ç°ä½ç½®**ï¼š`/reports` - èµ„äº§è´Ÿå€ºè¡¨
- **æŠ¥è¡¨å†…å®¹**ï¼š
  - **èµ„äº§éƒ¨åˆ†**ï¼š
    - æµåŠ¨èµ„äº§
    - éæµåŠ¨èµ„äº§
    - èµ„äº§å°è®¡
  - **è´Ÿå€ºéƒ¨åˆ†**ï¼š
    - æµåŠ¨è´Ÿå€º
    - éæµåŠ¨è´Ÿå€º
    - è´Ÿå€ºå°è®¡
  - **å‡€èµ„äº§**ï¼šèµ„äº§æ€»é¢ - è´Ÿå€ºæ€»é¢

#### 7.1.2 æ•°æ®ç‰¹ç‚¹

- **æ—¶ç‚¹æ•°æ®**ï¼šåæ˜ ç‰¹å®šæ—¶ç‚¹çš„è´¢åŠ¡çŠ¶å†µ
- **ä½™é¢å¯¼å‘**ï¼šå…³æ³¨è´¦æˆ·å½“å‰ä½™é¢
- **åˆ†ç±»æ±‡æ€»**ï¼šæŒ‰åˆ†ç±»å±‚çº§æ±‡æ€»æ˜¾ç¤º

### 7.2 ç°é‡‘æµé‡è¡¨

#### 7.2.1 æŠ¥è¡¨ç»“æ„

- **å®ç°ä½ç½®**ï¼š`/reports` - ç°é‡‘æµé‡è¡¨
- **æŠ¥è¡¨å†…å®¹**ï¼š
  - **ç»è¥æ´»åŠ¨ç°é‡‘æµ**ï¼š
    - æ”¶å…¥é¡¹ç›®
    - æ”¯å‡ºé¡¹ç›®
    - ç»è¥æ´»åŠ¨å‡€ç°é‡‘æµ
  - **æŠ•èµ„æ´»åŠ¨ç°é‡‘æµ**ï¼š
    - æŠ•èµ„æ”¶ç›Š
    - æŠ•èµ„æ”¯å‡º
    - æŠ•èµ„æ´»åŠ¨å‡€ç°é‡‘æµ
  - **ç­¹èµ„æ´»åŠ¨ç°é‡‘æµ**ï¼š
    - å€Ÿæ¬¾æ”¶å…¥
    - è¿˜æ¬¾æ”¯å‡º
    - ç­¹èµ„æ´»åŠ¨å‡€ç°é‡‘æµ

#### 7.2.2 æ•°æ®ç‰¹ç‚¹

- **æœŸé—´æ•°æ®**ï¼šåæ˜ ç‰¹å®šæœŸé—´çš„ç°é‡‘æµåŠ¨
- **æµé‡å¯¼å‘**ï¼šå…³æ³¨äº¤æ˜“æµæ°´æ±‡æ€»
- **æ´»åŠ¨åˆ†ç±»**ï¼šæŒ‰ç°é‡‘æµæ´»åŠ¨æ€§è´¨åˆ†ç±»

### 7.3 æŠ¥è¡¨åŠŸèƒ½

#### 7.3.1 æ—¶é—´èŒƒå›´é€‰æ‹©

- **é¢„è®¾èŒƒå›´**ï¼š
  - æœ¬æœˆ
  - æœ¬å­£åº¦
  - æœ¬å¹´åº¦
  - è‡ªå®šä¹‰èŒƒå›´

#### 7.3.2 è´§å¸æ˜¾ç¤º

- **æœ¬ä½å¸æ˜¾ç¤º**ï¼šç»Ÿä¸€è½¬æ¢ä¸ºæœ¬ä½å¸æ˜¾ç¤º
- **åŸå¸ç§å‚è€ƒ**ï¼šæä¾›åŸå§‹è´§å¸é‡‘é¢å‚è€ƒ
- **æ±‡ç‡è¯´æ˜**ï¼šæ˜¾ç¤ºä½¿ç”¨çš„æ±‡ç‡ä¿¡æ¯

#### 7.3.3 å¯¼å‡ºåŠŸèƒ½

- **PDFå¯¼å‡º**ï¼šç”Ÿæˆä¸“ä¸šæ ¼å¼çš„PDFæŠ¥è¡¨
- **Excelå¯¼å‡º**ï¼šå¯¼å‡ºå¯ç¼–è¾‘çš„Excelæ ¼å¼
- **æ‰“å°åŠŸèƒ½**ï¼šæ”¯æŒæµè§ˆå™¨æ‰“å°

## 8. ç”¨æˆ·è®¾ç½®ç³»ç»Ÿ

### 8.1 ä¸ªäººä¿¡æ¯è®¾ç½®

#### 8.1.1 åŸºæœ¬ä¿¡æ¯

- **å®ç°ä½ç½®**ï¼š`/settings` - ä¸ªäººä¿¡æ¯æ ‡ç­¾
- **å¯è®¾ç½®é¡¹**ï¼š
  - ç”¨æˆ·é‚®ç®±ï¼ˆç™»å½•è´¦å·ï¼‰
  - å¯†ç ä¿®æ”¹
  - è´¦æˆ·å®‰å…¨è®¾ç½®

#### 8.1.2 å®‰å…¨è®¾ç½®

- **å¯†ç ç®¡ç†**ï¼š
  - å½“å‰å¯†ç éªŒè¯
  - æ–°å¯†ç è®¾ç½®
  - å¯†ç å¼ºåº¦æ£€æŸ¥

### 8.2 ç³»ç»Ÿåå¥½è®¾ç½®

#### 8.2.1 æ˜¾ç¤ºè®¾ç½®

- **ä¸»é¢˜é€‰æ‹©**ï¼š

  - æ˜äº®ä¸»é¢˜
  - æš—é»‘ä¸»é¢˜
  - è·Ÿéšç³»ç»Ÿ

- **è¯­è¨€è®¾ç½®**ï¼š
  - ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰
  - English
  - å®æ—¶åˆ‡æ¢

#### 8.2.2 è´§å¸è®¾ç½®

- **æœ¬ä½å¸è®¾ç½®**ï¼š

  - ä»å¯ç”¨è´§å¸ä¸­é€‰æ‹©
  - å½±å“æ±‡æ€»è®¡ç®—
  - å½±å“æŠ¥è¡¨æ˜¾ç¤º

- **å¯ç”¨è´§å¸ç®¡ç†**ï¼š
  - æ·»åŠ /ç§»é™¤è´§å¸
  - è´§å¸æ’åº
  - å¯ç”¨/ç¦ç”¨çŠ¶æ€

### 8.3 åˆ†ç±»è®¾ç½®

#### 8.3.1 åˆ†ç±»ç®¡ç†

- **å®ç°ä½ç½®**ï¼š`/settings` - åˆ†ç±»è®¾ç½®æ ‡ç­¾
- **ç®¡ç†åŠŸèƒ½**ï¼š
  - åˆ›å»ºæ–°åˆ†ç±»
  - ç¼–è¾‘åˆ†ç±»ä¿¡æ¯
  - åˆ é™¤åˆ†ç±»ï¼ˆå¸¦ä¿æŠ¤ï¼‰
  - åˆ†ç±»æ’åº

#### 8.3.2 åˆ†ç±»ç±»å‹è®¾ç½®

- **ç±»å‹æŒ‡å®š**ï¼š

  - èµ„äº§ç±»åˆ†ç±»
  - è´Ÿå€ºç±»åˆ†ç±»
  - æ”¶å…¥ç±»åˆ†ç±»
  - æ”¯å‡ºç±»åˆ†ç±»

- **ç±»å‹å½±å“**ï¼š
  - å½±å“ä½™é¢è®¡ç®—é€»è¾‘
  - å½±å“ç»Ÿè®¡æ–¹å¼
  - å½±å“æŠ¥è¡¨åˆ†ç±»

### 8.4 æ±‡ç‡è®¾ç½®

#### 8.4.1 æ±‡ç‡ç®¡ç†

- **å®ç°ä½ç½®**ï¼š`/settings` - æ±‡ç‡ç®¡ç†æ ‡ç­¾
- **ç®¡ç†åŠŸèƒ½**ï¼š
  - æŸ¥çœ‹ç°æœ‰æ±‡ç‡
  - æ·»åŠ æ–°æ±‡ç‡
  - ç¼–è¾‘æ±‡ç‡å€¼
  - åˆ é™¤è¿‡æœŸæ±‡ç‡

#### 8.4.2 æ±‡ç‡è®¾ç½®å‘å¯¼

- **ç¼ºå¤±æ£€æµ‹**ï¼šè‡ªåŠ¨æ£€æµ‹éœ€è¦è®¾ç½®çš„æ±‡ç‡
- **æ‰¹é‡è®¾ç½®**ï¼šä¸€æ¬¡æ€§è®¾ç½®å¤šä¸ªæ±‡ç‡
- **æ±‡ç‡éªŒè¯**ï¼šæ£€æŸ¥æ±‡ç‡åˆç†æ€§

## 9. ç”¨æˆ·ç•Œé¢è®¾è®¡

### 9.1 è®¾è®¡åŸåˆ™

#### 9.1.1 å“åº”å¼è®¾è®¡

- **æ¡Œé¢ç«¯ä¼˜åŒ–**ï¼š

  - å®½å±å¸ƒå±€
  - å¤šåˆ—æ˜¾ç¤º
  - ä¸°å¯Œçš„äº¤äº’

- **ç§»åŠ¨ç«¯é€‚é…**ï¼š
  - å•åˆ—å¸ƒå±€
  - è§¦æ‘¸å‹å¥½
  - ç®€åŒ–æ“ä½œ

#### 9.1.2 è§†è§‰å±‚æ¬¡

- **é¢œè‰²ç³»ç»Ÿ**ï¼š

  - èµ„äº§ç±»ï¼šè“è‰²ä¸»é¢˜
  - è´Ÿå€ºç±»ï¼šæ©™è‰²ä¸»é¢˜
  - æ”¶å…¥ç±»ï¼šç»¿è‰²ä¸»é¢˜
  - æ”¯å‡ºç±»ï¼šçº¢è‰²ä¸»é¢˜

- **å›¾æ ‡ç³»ç»Ÿ**ï¼š
  - Lucide Reactå›¾æ ‡åº“
  - è¯­ä¹‰åŒ–å›¾æ ‡é€‰æ‹©
  - ä¸€è‡´çš„å›¾æ ‡é£æ ¼

### 9.2 å¸ƒå±€ç»“æ„

#### 9.2.1 ä¸»å¸ƒå±€

- **é¡¶éƒ¨å¯¼èˆª**ï¼š

  - åº”ç”¨æ ‡é¢˜
  - ç”¨æˆ·èœå•
  - å¿«é€Ÿè®¾ç½®

- **ä¾§è¾¹æ **ï¼š

  - ä¸»å¯¼èˆªèœå•
  - è´¦æˆ·åˆ†ç±»æ ‘
  - å¿«é€Ÿç»Ÿè®¡

- **ä¸»å†…å®¹åŒº**ï¼š
  - é¡µé¢å†…å®¹
  - æ•°æ®å±•ç¤º
  - æ“ä½œç•Œé¢

#### 9.2.2 å¯¼èˆªç³»ç»Ÿ

- **ä¸»å¯¼èˆª**ï¼š

  - ä»ªè¡¨æ¿
  - è´¦æˆ·ç®¡ç†
  - åˆ†ç±»ç®¡ç†
  - è´¢åŠ¡æŠ¥è¡¨
  - ç”¨æˆ·è®¾ç½®

- **é¢åŒ…å±‘å¯¼èˆª**ï¼š
  - å½“å‰ä½ç½®æŒ‡ç¤º
  - å¿«é€Ÿè¿”å›ä¸Šçº§
  - è·¯å¾„æ¸…æ™°å±•ç¤º

### 9.3 äº¤äº’è®¾è®¡

#### 9.3.1 è¡¨å•è®¾è®¡

- **è¡¨å•éªŒè¯**ï¼š

  - å®æ—¶éªŒè¯
  - é”™è¯¯æç¤º
  - æˆåŠŸåé¦ˆ

- **ç”¨æˆ·å¼•å¯¼**ï¼š
  - å ä½ç¬¦æ–‡æœ¬
  - å¸®åŠ©æç¤º
  - æ“ä½œè¯´æ˜

#### 9.3.2 åé¦ˆç³»ç»Ÿ

- **Toasté€šçŸ¥**ï¼š

  - æ“ä½œæˆåŠŸæç¤º
  - é”™è¯¯ä¿¡æ¯æ˜¾ç¤º
  - è­¦å‘Šä¿¡æ¯æé†’

- **åŠ è½½çŠ¶æ€**ï¼š
  - éª¨æ¶å±åŠ è½½
  - è¿›åº¦æŒ‡ç¤ºå™¨
  - åŠ è½½åŠ¨ç”»

### 9.4 æ•°æ®å¯è§†åŒ–

#### 9.4.1 å›¾è¡¨è®¾è®¡

- **EChartsé›†æˆ**ï¼š

  - ä¸“ä¸šå›¾è¡¨åº“
  - ä¸°å¯Œçš„å›¾è¡¨ç±»å‹
  - äº¤äº’å¼å›¾è¡¨

- **å›¾è¡¨ç±»å‹**ï¼š
  - æŠ˜çº¿å›¾ï¼šè¶‹åŠ¿å±•ç¤º
  - æŸ±çŠ¶å›¾ï¼šå¯¹æ¯”åˆ†æ
  - é¥¼å›¾ï¼šåˆ†å¸ƒå±•ç¤º
  - é¢ç§¯å›¾ï¼šç´¯ç§¯å±•ç¤º

#### 9.4.2 æ•°æ®å±•ç¤º

- **åƒä½åˆ†éš”ç¬¦**ï¼š

  - é‡‘é¢æ˜¾ç¤ºæ ¼å¼åŒ–
  - æé«˜å¯è¯»æ€§
  - ç»Ÿä¸€æ ¼å¼æ ‡å‡†

- **è´§å¸ç¬¦å·**ï¼š
  - è´§å¸æ ‡è¯†æ˜¾ç¤º
  - é¢œè‰²ç¼–ç 
  - ç›´è§‚è¯†åˆ«

## 10. å›½é™…åŒ–ä¸ä¸»é¢˜

### 10.1 å›½é™…åŒ–æ”¯æŒ

#### 10.1.1 å¤šè¯­è¨€ç³»ç»Ÿ

- **æ”¯æŒè¯­è¨€**ï¼š

  - ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰- é»˜è®¤è¯­è¨€
  - English - è‹±æ–‡æ”¯æŒ

- **å®ç°æ–¹å¼**ï¼š
  - React Contextç®¡ç†
  - JSONç¿»è¯‘æ–‡ä»¶
  - åŠ¨æ€è¯­è¨€åˆ‡æ¢

#### 10.1.2 ç¿»è¯‘è¦†ç›–

- **ç•Œé¢ç¿»è¯‘**ï¼š

  - æ‰€æœ‰UIæ–‡æœ¬
  - æŒ‰é’®å’Œæ ‡ç­¾
  - æç¤ºä¿¡æ¯

- **æ•°æ®ç¿»è¯‘**ï¼š
  - é”™è¯¯ä¿¡æ¯
  - æˆåŠŸæç¤º
  - å¸®åŠ©æ–‡æ¡£

### 10.2 ä¸»é¢˜ç³»ç»Ÿ

#### 10.2.1 ä¸»é¢˜é€‰é¡¹

- **æ˜äº®ä¸»é¢˜**ï¼š

  - ç™½è‰²èƒŒæ™¯
  - æ·±è‰²æ–‡å­—
  - æ¸…æ™°å¯¹æ¯”

- **æš—é»‘ä¸»é¢˜**ï¼š

  - æ·±è‰²èƒŒæ™¯
  - æµ…è‰²æ–‡å­—
  - æŠ¤çœ¼è®¾è®¡

- **ç³»ç»Ÿä¸»é¢˜**ï¼š
  - è·Ÿéšç³»ç»Ÿè®¾ç½®
  - è‡ªåŠ¨åˆ‡æ¢
  - ç”¨æˆ·å‹å¥½

#### 10.2.2 ä¸»é¢˜å®ç°

- **CSSå˜é‡**ï¼š

  - åŠ¨æ€é¢œè‰²å€¼
  - ä¸»é¢˜åˆ‡æ¢
  - ä¸€è‡´æ€§ä¿è¯

- **Tailwind CSS**ï¼š
  - åŸå­åŒ–CSS
  - ä¸»é¢˜å˜é‡æ”¯æŒ
  - å“åº”å¼è®¾è®¡

---

# ğŸ—ï¸ æŠ€æœ¯æ¶æ„

## 1. ç³»ç»Ÿæ¶æ„

### 1.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ (React)   â”‚    â”‚  åç«¯ (Next.js)  â”‚    â”‚  æ•°æ®åº“ (SQLite) â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ ç”¨æˆ·ç•Œé¢      â”‚â—„â”€â”€â–ºâ”‚ â€¢ API Routes    â”‚â—„â”€â”€â–ºâ”‚ â€¢ Prisma ORM    â”‚
â”‚ â€¢ çŠ¶æ€ç®¡ç†      â”‚    â”‚ â€¢ ä¸šåŠ¡é€»è¾‘      â”‚    â”‚ â€¢ æ•°æ®æ¨¡å‹      â”‚
â”‚ â€¢ è·¯ç”±ç®¡ç†      â”‚    â”‚ â€¢ è®¤è¯æˆæƒ      â”‚    â”‚ â€¢ æ•°æ®æŒä¹…åŒ–    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æŠ€æœ¯é€‰å‹ç†ç”±

#### 1.2.1 Next.js App Router

- **ä¼˜åŠ¿**ï¼š
  - æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰
  - é™æ€ç”Ÿæˆï¼ˆSSGï¼‰
  - API Routesé›†æˆ
  - æ–‡ä»¶ç³»ç»Ÿè·¯ç”±

#### 1.2.2 Prisma ORM

- **ä¼˜åŠ¿**ï¼š
  - ç±»å‹å®‰å…¨
  - æ•°æ®åº“è¿ç§»
  - æŸ¥è¯¢æ„å»ºå™¨
  - å¼€å‘ä½“éªŒä¼˜ç§€

#### 1.2.3 SQLite/PostgreSQL

- **SQLite**ï¼ˆå¼€å‘ç¯å¢ƒï¼‰ï¼š

  - é›¶é…ç½®
  - æ–‡ä»¶æ•°æ®åº“
  - å¿«é€Ÿå¼€å‘

- **PostgreSQL**ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰ï¼š
  - ä¼ä¸šçº§æ•°æ®åº“
  - é«˜å¹¶å‘æ”¯æŒ
  - ä¸°å¯Œçš„æ•°æ®ç±»å‹

## 2. æ•°æ®æ¨¡å‹è®¾è®¡

### 2.1 æ ¸å¿ƒå®ä½“å…³ç³»

```mermaid
erDiagram
    User ||--o{ Account : owns
    User ||--o{ Category : creates
    User ||--o{ Transaction : records
    User ||--|| UserSettings : has
    User ||--o{ UserCurrency : configures
    User ||--o{ ExchangeRate : sets

    Category ||--o{ Account : contains
    Category ||--o{ Category : parent-child

    Account ||--o{ Transaction : has
    Account }|--|| Currency : uses

    Transaction }|--|| Currency : denominated-in
    Transaction ||--o{ TransactionTag : tagged-with

    Currency ||--o{ ExchangeRate : from-currency
    Currency ||--o{ ExchangeRate : to-currency
```

### 2.2 å…³é”®æ•°æ®æ¨¡å‹

#### 2.2.1 ç”¨æˆ·æ¨¡å‹ (User)

```prisma
model User {
  id               String    @id @default(cuid())
  email            String    @unique
  password         String    // å“ˆå¸Œåçš„å¯†ç 
  resetToken       String?   // å¯†ç é‡ç½®ä»¤ç‰Œ
  resetTokenExpiry DateTime? // é‡ç½®ä»¤ç‰Œè¿‡æœŸæ—¶é—´
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  // å…³è”å…³ç³»
  settings         UserSettings?
  userCurrencies   UserCurrency[]
  accounts         Account[]
  categories       Category[]
  transactions     Transaction[]
  exchangeRates    ExchangeRate[]
}
```

#### 2.2.2 è´¦æˆ·ç±»å‹æšä¸¾

```prisma
enum AccountType {
  ASSET     // èµ„äº§ç±»ï¼ˆå­˜é‡ï¼‰
  LIABILITY // è´Ÿå€ºç±»ï¼ˆå­˜é‡ï¼‰
  INCOME    // æ”¶å…¥ç±»ï¼ˆæµé‡ï¼‰
  EXPENSE   // æ”¯å‡ºç±»ï¼ˆæµé‡ï¼‰
}
```

#### 2.2.3 äº¤æ˜“ç±»å‹æšä¸¾

```prisma
enum TransactionType {
  INCOME             // æ”¶å…¥
  EXPENSE            // æ”¯å‡º
  BALANCE            // ä½™é¢è°ƒæ•´
}
```

### 2.3 æ•°æ®å®Œæ•´æ€§çº¦æŸ

#### 2.3.1 å”¯ä¸€æ€§çº¦æŸ

- ç”¨æˆ·é‚®ç®±å”¯ä¸€æ€§
- ç”¨æˆ·å†…è´¦æˆ·åå”¯ä¸€æ€§
- ç”¨æˆ·å†…åˆ†ç±»åå”¯ä¸€æ€§ï¼ˆåŒçº§ï¼‰
- æ±‡ç‡è®¾ç½®å”¯ä¸€æ€§ï¼ˆç”¨æˆ·+è´§å¸å¯¹+æ—¥æœŸï¼‰

#### 2.3.2 å¤–é”®çº¦æŸ

- çº§è”åˆ é™¤ï¼šç”¨æˆ·åˆ é™¤æ—¶åˆ é™¤æ‰€æœ‰å…³è”æ•°æ®
- å¼•ç”¨å®Œæ•´æ€§ï¼šç¡®ä¿å¤–é”®å¼•ç”¨å­˜åœ¨
- çº¦æŸæ£€æŸ¥ï¼šä¸šåŠ¡è§„åˆ™éªŒè¯

## 3. API è®¾è®¡

### 3.1 API æ¶æ„

#### 3.1.1 RESTful è®¾è®¡

- **èµ„æºå¯¼å‘**ï¼šä»¥èµ„æºä¸ºä¸­å¿ƒçš„URLè®¾è®¡
- **HTTPæ–¹æ³•**ï¼šGETã€POSTã€PUTã€DELETE
- **çŠ¶æ€ç **ï¼šæ ‡å‡†HTTPçŠ¶æ€ç 
- **å“åº”æ ¼å¼**ï¼šç»Ÿä¸€JSONæ ¼å¼

#### 3.1.2 API å“åº”æ ¼å¼

```typescript
// æˆåŠŸå“åº”
{
  success: true,
  data: any,
  message?: string
}

// é”™è¯¯å“åº”
{
  success: false,
  error: string,
  details?: any
}
```

### 3.2 æ ¸å¿ƒ API ç«¯ç‚¹

#### 3.2.1 è®¤è¯ç›¸å…³

```
POST /api/auth/signup          # ç”¨æˆ·æ³¨å†Œ
POST /api/auth/login           # ç”¨æˆ·ç™»å½•
POST /api/auth/logout          # ç”¨æˆ·ç™»å‡º
POST /api/auth/request-password-reset  # è¯·æ±‚å¯†ç é‡ç½®
POST /api/auth/reset-password  # é‡ç½®å¯†ç 
```

#### 3.2.2 è´¦æˆ·ç®¡ç†

```
GET    /api/accounts           # è·å–è´¦æˆ·åˆ—è¡¨
POST   /api/accounts           # åˆ›å»ºæ–°è´¦æˆ·
GET    /api/accounts/[id]      # è·å–è´¦æˆ·è¯¦æƒ…
PUT    /api/accounts/[id]      # æ›´æ–°è´¦æˆ·ä¿¡æ¯
DELETE /api/accounts/[id]      # åˆ é™¤è´¦æˆ·
GET    /api/accounts/[id]/details      # è·å–è´¦æˆ·è¯¦ç»†ç»Ÿè®¡
GET    /api/accounts/[id]/transactions # è·å–è´¦æˆ·äº¤æ˜“åˆ—è¡¨
```

#### 3.2.3 äº¤æ˜“ç®¡ç†

```
GET    /api/transactions       # è·å–äº¤æ˜“åˆ—è¡¨
POST   /api/transactions       # åˆ›å»ºæ–°äº¤æ˜“
GET    /api/transactions/[id]  # è·å–äº¤æ˜“è¯¦æƒ…
PUT    /api/transactions/[id]  # æ›´æ–°äº¤æ˜“ä¿¡æ¯
DELETE /api/transactions/[id]  # åˆ é™¤äº¤æ˜“
```

#### 3.2.4 ä½™é¢æ›´æ–°

```
POST   /api/balance-update     # æ›´æ–°è´¦æˆ·ä½™é¢
```

#### 3.2.5 åˆ†ç±»ç®¡ç†

```
GET    /api/categories         # è·å–åˆ†ç±»åˆ—è¡¨
POST   /api/categories         # åˆ›å»ºæ–°åˆ†ç±»
GET    /api/categories/[id]    # è·å–åˆ†ç±»è¯¦æƒ…
PUT    /api/categories/[id]    # æ›´æ–°åˆ†ç±»ä¿¡æ¯
DELETE /api/categories/[id]    # åˆ é™¤åˆ†ç±»
GET    /api/categories/[id]/summary # è·å–åˆ†ç±»æ±‡æ€»ç»Ÿè®¡
```

#### 3.2.6 è´§å¸å’Œæ±‡ç‡

```
GET    /api/currencies         # è·å–è´§å¸åˆ—è¡¨
GET    /api/user-currencies    # è·å–ç”¨æˆ·å¯ç”¨è´§å¸
POST   /api/user-currencies    # è®¾ç½®ç”¨æˆ·å¯ç”¨è´§å¸
GET    /api/exchange-rates     # è·å–æ±‡ç‡åˆ—è¡¨
POST   /api/exchange-rates     # åˆ›å»º/æ›´æ–°æ±‡ç‡
GET    /api/exchange-rates/missing # æ£€æŸ¥ç¼ºå¤±æ±‡ç‡
```

#### 3.2.7 æŠ¥è¡¨å’Œç»Ÿè®¡

```
GET    /api/dashboard/summary  # ä»ªè¡¨æ¿æ±‡æ€»æ•°æ®
GET    /api/dashboard/charts   # ä»ªè¡¨æ¿å›¾è¡¨æ•°æ®
GET    /api/reports/balance-sheet # èµ„äº§è´Ÿå€ºè¡¨
GET    /api/reports/personal-cash-flow # ä¸ªäººç°é‡‘æµé‡è¡¨
```

#### 3.2.8 ç”¨æˆ·è®¾ç½®

```
GET    /api/user/settings      # è·å–ç”¨æˆ·è®¾ç½®
PUT    /api/user/settings      # æ›´æ–°ç”¨æˆ·è®¾ç½®
PUT    /api/user/password      # ä¿®æ”¹å¯†ç 
```

### 3.3 API å®‰å…¨

#### 3.3.1 è®¤è¯æœºåˆ¶

- **JWTä»¤ç‰Œ**ï¼šæ— çŠ¶æ€è®¤è¯
- **HTTP-only Cookie**ï¼šå®‰å…¨å­˜å‚¨
- **ä»¤ç‰Œè¿‡æœŸ**ï¼šè‡ªåŠ¨è¿‡æœŸæœºåˆ¶
- **åˆ·æ–°æœºåˆ¶**ï¼šä»¤ç‰Œè‡ªåŠ¨åˆ·æ–°

#### 3.3.2 æˆæƒæ§åˆ¶

- **ç”¨æˆ·éš”ç¦»**ï¼šæ•°æ®æŒ‰ç”¨æˆ·éš”ç¦»
- **æƒé™æ£€æŸ¥**ï¼šæ“ä½œæƒé™éªŒè¯
- **èµ„æºä¿æŠ¤**ï¼šé˜²æ­¢è¶Šæƒè®¿é—®

#### 3.3.3 æ•°æ®éªŒè¯

- **è¾“å…¥éªŒè¯**ï¼šæ‰€æœ‰è¾“å…¥æ•°æ®éªŒè¯
- **ç±»å‹æ£€æŸ¥**ï¼šTypeScriptç±»å‹å®‰å…¨
- **ä¸šåŠ¡è§„åˆ™**ï¼šä¸šåŠ¡é€»è¾‘éªŒè¯
- **SQLæ³¨å…¥é˜²æŠ¤**ï¼šPrisma ORMä¿æŠ¤

## 4. æ€§èƒ½ä¼˜åŒ–

### 4.1 å‰ç«¯ä¼˜åŒ–

#### 4.1.1 ä»£ç åˆ†å‰²

- **è·¯ç”±åˆ†å‰²**ï¼šæŒ‰é¡µé¢åˆ†å‰²ä»£ç 
- **ç»„ä»¶æ‡’åŠ è½½**ï¼šåŠ¨æ€å¯¼å…¥ç»„ä»¶
- **ç¬¬ä¸‰æ–¹åº“åˆ†å‰²**ï¼šç‹¬ç«‹æ‰“åŒ…ç¬¬ä¸‰æ–¹åº“

#### 4.1.2 ç¼“å­˜ç­–ç•¥

- **æµè§ˆå™¨ç¼“å­˜**ï¼šé™æ€èµ„æºç¼“å­˜
- **APIç¼“å­˜**ï¼šæ¥å£æ•°æ®ç¼“å­˜
- **çŠ¶æ€ç¼“å­˜**ï¼šç»„ä»¶çŠ¶æ€ç¼“å­˜

#### 4.1.3 æ¸²æŸ“ä¼˜åŒ–

- **æœåŠ¡ç«¯æ¸²æŸ“**ï¼šé¦–å±å¿«é€ŸåŠ è½½
- **é™æ€ç”Ÿæˆ**ï¼šé¢„ç”Ÿæˆé™æ€é¡µé¢
- **å¢é‡é™æ€å†ç”Ÿ**ï¼šåŠ¨æ€æ›´æ–°é™æ€é¡µé¢

### 4.2 åç«¯ä¼˜åŒ–

#### 4.2.1 æ•°æ®åº“ä¼˜åŒ–

- **ç´¢å¼•ä¼˜åŒ–**ï¼šå…³é”®å­—æ®µç´¢å¼•
- **æŸ¥è¯¢ä¼˜åŒ–**ï¼šé«˜æ•ˆæŸ¥è¯¢è¯­å¥
- **è¿æ¥æ± **ï¼šæ•°æ®åº“è¿æ¥å¤ç”¨

#### 4.2.2 APIä¼˜åŒ–

- **æ‰¹é‡æ“ä½œ**ï¼šå‡å°‘APIè°ƒç”¨æ¬¡æ•°
- **æ•°æ®èšåˆ**ï¼šæœåŠ¡ç«¯æ•°æ®èšåˆ
- **åˆ†é¡µæŸ¥è¯¢**ï¼šå¤§æ•°æ®é›†åˆ†é¡µå¤„ç†

### 4.3 ç”¨æˆ·ä½“éªŒä¼˜åŒ–

#### 4.3.1 åŠ è½½ä½“éªŒ

- **éª¨æ¶å±**ï¼šåŠ è½½çŠ¶æ€å±•ç¤º
- **è¿›åº¦æŒ‡ç¤º**ï¼šæ“ä½œè¿›åº¦åé¦ˆ
- **é”™è¯¯å¤„ç†**ï¼šå‹å¥½é”™è¯¯æç¤º

#### 4.3.2 äº¤äº’ä½“éªŒ

- **å®æ—¶æ›´æ–°**ï¼šæ•°æ®å®æ—¶åŒæ­¥
- **ä¹è§‚æ›´æ–°**ï¼šç•Œé¢å³æ—¶å“åº”
- **ç¦»çº¿æ”¯æŒ**ï¼šåŸºç¡€ç¦»çº¿åŠŸèƒ½

---

# ğŸš€ éƒ¨ç½²ä¸ç»´æŠ¤

## 1. ç°ä»£åŒ–éƒ¨ç½²æŒ‡å—

### 1.1 Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### 1.1.1 å¿«é€Ÿå¼€å§‹

```bash
# ä½¿ç”¨é¢„æ„å»ºé•œåƒ
docker run -d \
  --name flow-balance \
  -p 3000:3000 \
  -e DATABASE_URL="file:./data/production.db" \
  -e JWT_SECRET="your-secure-jwt-secret" \
  -v flow-balance-data:/app/data \
  ghcr.io/jomonylw/flow-balance:latest
```

#### 1.1.2 Docker Compose éƒ¨ç½²

**SQLite ç‰ˆæœ¬ï¼ˆå•æœºéƒ¨ç½²ï¼‰**

```bash
# 1. ä¸‹è½½é…ç½®æ–‡ä»¶
wget https://raw.githubusercontent.com/your-repo/flow-balance/main/docker-compose.yml
wget https://raw.githubusercontent.com/your-repo/flow-balance/main/.env.docker

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.docker .env
nano .env  # ä¿®æ”¹ JWT_SECRET ç­‰æ•æ„Ÿä¿¡æ¯

# 3. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 4. æŸ¥çœ‹çŠ¶æ€
docker-compose ps
docker-compose logs -f app
```

**PostgreSQL ç‰ˆæœ¬ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰**

```bash
# 1. ä¸‹è½½é…ç½®æ–‡ä»¶
wget https://raw.githubusercontent.com/your-repo/flow-balance/main/docker-compose.yml
wget https://raw.githubusercontent.com/your-repo/flow-balance/main/.env.docker

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.docker .env
nano .env

# ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š
# DATABASE_URL="postgresql://flowbalance:your_secure_password@postgres:5432/flowbalance?schema=public"
# POSTGRES_PASSWORD="your_very_secure_password"
# JWT_SECRET="your-production-jwt-secret-minimum-32-characters"

# 3. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 4. æ£€æŸ¥æœåŠ¡
docker-compose ps
docker-compose logs postgres
docker-compose logs app
```

#### 1.1.3 è‡ªå®šä¹‰æ„å»º

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd persional-balance-sheet

# 2. æ„å»ºé•œåƒ
docker build -t flow-balance .

# 3. è¿è¡Œå®¹å™¨
docker run -d \
  --name flow-balance \
  -p 3000:3000 \
  -e DATABASE_URL="file:./data/production.db" \
  -e JWT_SECRET="your-secure-jwt-secret" \
  -v $(pwd)/data:/app/data \
  flow-balance
```

### 1.2 Vercel éƒ¨ç½²

#### 1.2.1 ä¸€é”®éƒ¨ç½²

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/jomonylw/flow-balance)

#### 1.2.2 æ‰‹åŠ¨éƒ¨ç½²

```bash
# 1. å®‰è£… Vercel CLI
npm i -g vercel

# 2. ç™»å½• Vercel
vercel login

# 3. éƒ¨ç½²é¡¹ç›®
vercel

# 4. é…ç½®ç¯å¢ƒå˜é‡
vercel env add DATABASE_URL
vercel env add JWT_SECRET
vercel env add NEXTAUTH_SECRET

# 5. é‡æ–°éƒ¨ç½²
vercel --prod
```

#### 1.2.3 ç¯å¢ƒå˜é‡é…ç½®

åœ¨ Vercel æ§åˆ¶å°ä¸­è®¾ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```bash
# å¿…éœ€å˜é‡
DATABASE_URL="postgresql://username:password@your-postgres-url/flowbalance?sslmode=require"
JWT_SECRET="your-production-jwt-secret-very-long-and-secure"
NEXTAUTH_SECRET="your-nextauth-secret-change-this-in-production"

# å¯é€‰å˜é‡
NEXT_PUBLIC_APP_URL="https://your-app.vercel.app"
```

### 1.3 ä¼ ç»ŸæœåŠ¡å™¨éƒ¨ç½²

#### 1.3.1 ç¯å¢ƒå‡†å¤‡

```bash
# 1. æœåŠ¡å™¨è¦æ±‚
- Node.js 18.0+
- PostgreSQL 13+
- å†…å­˜: 2GB+
- å­˜å‚¨: 10GB+

# 2. ç¯å¢ƒå˜é‡é…ç½®
DATABASE_URL="postgresql://user:password@localhost:5432/flowbalance"
JWT_SECRET="your-production-jwt-secret"
NEXTAUTH_URL="https://your-domain.com"
NEXTAUTH_SECRET="your-nextauth-secret"
```

#### 1.3.2 éƒ¨ç½²æ­¥éª¤

```bash
# 1. å…‹éš†ä»£ç 
git clone <repository-url>
cd persional-balance-sheet

# 2. å®‰è£…ä¾èµ–
pnpm install --production

# 3. æ•°æ®åº“è®¾ç½®
pnpm db:generate
pnpm db:migrate

# 4. æ„å»ºåº”ç”¨
pnpm build

# 5. å¯åŠ¨æœåŠ¡
pnpm start
```

### 1.2 Docker éƒ¨ç½²

#### 1.2.1 Dockerfile

```dockerfile
FROM node:18-alpine AS base
WORKDIR /app
COPY package*.json ./
RUN npm install -g pnpm

FROM base AS deps
COPY pnpm-lock.yaml ./
RUN pnpm install --frozen-lockfile

FROM base AS builder
COPY . .
COPY --from=deps /app/node_modules ./node_modules
RUN pnpm build

FROM base AS runner
ENV NODE_ENV production
COPY --from=builder /app/public ./public
COPY --from=builder /app/.next/standalone ./
COPY --from=builder /app/.next/static ./.next/static

EXPOSE 3000
CMD ["node", "server.js"]
```

#### 1.2.2 Docker Compose

```yaml
version: '3.8'
services:
  app:
    build: .
    ports:
      - '3000:3000'
    environment:
      - DATABASE_URL=postgresql://postgres:password@db:5432/flowbalance
      - JWT_SECRET=your-jwt-secret
    depends_on:
      - db

  db:
    image: postgres:13
    environment:
      - POSTGRES_DB=flowbalance
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=password
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  postgres_data:
```

### 1.3 äº‘å¹³å°éƒ¨ç½²

#### 1.3.1 Vercel éƒ¨ç½²

```bash
# 1. å®‰è£… Vercel CLI
npm i -g vercel

# 2. ç™»å½• Vercel
vercel login

# 3. éƒ¨ç½²é¡¹ç›®
vercel --prod

# 4. é…ç½®ç¯å¢ƒå˜é‡
vercel env add DATABASE_URL
vercel env add JWT_SECRET
```

#### 1.3.2 Railway éƒ¨ç½²

```bash
# 1. å®‰è£… Railway CLI
npm install -g @railway/cli

# 2. ç™»å½• Railway
railway login

# 3. åˆå§‹åŒ–é¡¹ç›®
railway init

# 4. éƒ¨ç½²
railway up
```

## 2. CI/CD è‡ªåŠ¨åŒ–éƒ¨ç½²

### 2.1 GitHub Actions

é¡¹ç›®å·²é…ç½®å®Œæ•´çš„ CI/CD æµæ°´çº¿ï¼Œæ”¯æŒè‡ªåŠ¨æµ‹è¯•ã€æ„å»ºå’Œå‘å¸ƒã€‚

#### 2.1.1 è‡ªåŠ¨åŒ–æµç¨‹

```yaml
# .github/workflows/docker-build.yml
name: Docker Build and Release

on:
  push:
    branches: [main, develop]
    tags: ['v*']
  pull_request:
    branches: [main, develop]

jobs:
  quality-check: # ä»£ç è´¨é‡æ£€æŸ¥
  docker-build: # Docker é•œåƒæ„å»º
  security-scan: # å®‰å…¨æ‰«æ
  release: # è‡ªåŠ¨å‘å¸ƒ
```

#### 2.1.2 è§¦å‘æ¡ä»¶

- **æ¨é€åˆ° main/develop åˆ†æ”¯**ï¼šè§¦å‘æ„å»ºå’Œæµ‹è¯•
- **åˆ›å»º Pull Request**ï¼šè§¦å‘ä»£ç æ£€æŸ¥
- **åˆ›å»º Tag (v\*)**ï¼šè§¦å‘æ­£å¼å‘å¸ƒ

#### 2.1.3 å‘å¸ƒæµç¨‹

```bash
# 1. åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
git tag v1.0.0
git push origin v1.0.0

# 2. è‡ªåŠ¨è§¦å‘ä»¥ä¸‹æµç¨‹ï¼š
# - ä»£ç è´¨é‡æ£€æŸ¥ï¼ˆESLint, TypeScript, Testsï¼‰
# - Docker é•œåƒæ„å»ºï¼ˆå¤šæ¶æ„æ”¯æŒï¼‰
# - å®‰å…¨æ¼æ´æ‰«æ
# - GitHub Release åˆ›å»º
# - é•œåƒæ¨é€åˆ° GitHub Container Registry
```

#### 2.1.4 ä½¿ç”¨å‘å¸ƒçš„é•œåƒ

```bash
# æ‹‰å–æœ€æ–°é•œåƒ
docker pull ghcr.io/jomonylw/flow-balance:latest

# æ‹‰å–ç‰¹å®šç‰ˆæœ¬
docker pull ghcr.io/jomonylw/flow-balance:v1.0.0

# è¿è¡Œå®¹å™¨
docker run -d \
  --name flow-balance \
  -p 3000:3000 \
  -e DATABASE_URL="file:./data/production.db" \
  -e JWT_SECRET="your-secure-jwt-secret" \
  ghcr.io/jomonylw/flow-balance:latest
```

### 2.2 è‡ªåŠ¨åŒ–æµ‹è¯•

#### 2.2.1 æµ‹è¯•ç±»å‹

- **å•å…ƒæµ‹è¯•**ï¼šç»„ä»¶å’Œå‡½æ•°æµ‹è¯•
- **é›†æˆæµ‹è¯•**ï¼šAPI ç«¯ç‚¹æµ‹è¯•
- **ç±»å‹æ£€æŸ¥**ï¼šTypeScript ç±»å‹éªŒè¯
- **ä»£ç è§„èŒƒ**ï¼šESLint å’Œ Prettier æ£€æŸ¥

#### 2.2.2 æœ¬åœ°æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm test

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pnpm test:coverage

# è¿è¡Œç±»å‹æ£€æŸ¥
pnpm type-check

# è¿è¡Œä»£ç è§„èŒƒæ£€æŸ¥
pnpm lint
```

### 2.3 ç¯å¢ƒç®¡ç†

#### 2.3.1 å¤šç¯å¢ƒé…ç½®

```bash
# å¼€å‘ç¯å¢ƒ
NODE_ENV=development
DATABASE_URL="file:./prisma/dev.db"

# æµ‹è¯•ç¯å¢ƒ
NODE_ENV=test
DATABASE_URL="file:./test.db"

# ç”Ÿäº§ç¯å¢ƒ
NODE_ENV=production
DATABASE_URL="postgresql://user:pass@host:5432/db"
```

#### 2.3.2 å¯†é’¥ç®¡ç†

```bash
# GitHub Secrets é…ç½®
DOCKER_USERNAME=your-docker-username
DOCKER_PASSWORD=your-docker-password
DATABASE_URL=your-production-database-url
JWT_SECRET=your-production-jwt-secret
```

## 3. æ•°æ®åº“ç®¡ç†

### 2.1 æ•°æ®åº“è¿ç§»

#### 2.1.1 å¼€å‘ç¯å¢ƒè¿ç§»

```bash
# åˆ›å»ºæ–°è¿ç§»
npx prisma migrate dev --name migration_name

# é‡ç½®æ•°æ®åº“
npx prisma migrate reset

# æŸ¥çœ‹è¿ç§»çŠ¶æ€
npx prisma migrate status
```

#### 2.1.2 ç”Ÿäº§ç¯å¢ƒè¿ç§»

```bash
# éƒ¨ç½²è¿ç§»
npx prisma migrate deploy

# ç”Ÿæˆå®¢æˆ·ç«¯
npx prisma generate
```

### 2.2 æ•°æ®å¤‡ä»½

#### 2.2.1 PostgreSQL å¤‡ä»½

```bash
# å¤‡ä»½æ•°æ®åº“
pg_dump -h localhost -U username -d flowbalance > backup.sql

# æ¢å¤æ•°æ®åº“
psql -h localhost -U username -d flowbalance < backup.sql
```

#### 2.2.2 è‡ªåŠ¨å¤‡ä»½è„šæœ¬

```bash
#!/bin/bash
# backup.sh
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="/backups"
DB_NAME="flowbalance"

pg_dump -h localhost -U postgres $DB_NAME > $BACKUP_DIR/backup_$DATE.sql

# ä¿ç•™æœ€è¿‘7å¤©çš„å¤‡ä»½
find $BACKUP_DIR -name "backup_*.sql" -mtime +7 -delete
```

### 2.3 æ•°æ®ç›‘æ§

#### 2.3.1 æ€§èƒ½ç›‘æ§

- æŸ¥è¯¢æ€§èƒ½åˆ†æ
- æ…¢æŸ¥è¯¢æ—¥å¿—
- è¿æ¥æ•°ç›‘æ§
- å­˜å‚¨ç©ºé—´ç›‘æ§

#### 2.3.2 æ•°æ®å®Œæ•´æ€§æ£€æŸ¥

```sql
-- æ£€æŸ¥æ•°æ®ä¸€è‡´æ€§
SELECT
  COUNT(*) as total_accounts,
  COUNT(DISTINCT userId) as unique_users
FROM Account;

-- æ£€æŸ¥ä½™é¢è®¡ç®—
SELECT
  a.id,
  a.name,
  SUM(t.amount) as calculated_balance
FROM Account a
LEFT JOIN Transaction t ON a.id = t.accountId
GROUP BY a.id, a.name;
```

## 3. ç›‘æ§ä¸æ—¥å¿—

### 3.1 åº”ç”¨ç›‘æ§

#### 3.1.1 å¥åº·æ£€æŸ¥

```typescript
// /api/health
export async function GET() {
  try {
    // æ£€æŸ¥æ•°æ®åº“è¿æ¥
    await prisma.$queryRaw`SELECT 1`

    return Response.json({
      status: 'healthy',
      timestamp: new Date().toISOString(),
      database: 'connected',
    })
  } catch (error) {
    return Response.json(
      {
        status: 'unhealthy',
        error: error.message,
      },
      { status: 500 }
    )
  }
}
```

#### 3.1.2 æ€§èƒ½æŒ‡æ ‡

- å“åº”æ—¶é—´ç›‘æ§
- é”™è¯¯ç‡ç»Ÿè®¡
- ç”¨æˆ·æ´»è·ƒåº¦
- èµ„æºä½¿ç”¨ç‡

### 3.2 æ—¥å¿—ç®¡ç†

#### 3.2.1 æ—¥å¿—çº§åˆ«

```typescript
// æ—¥å¿—é…ç½®
const logger = {
  error: (message: string, error?: Error) => {
    console.error(`[ERROR] ${message}`, error)
  },
  warn: (message: string) => {
    console.warn(`[WARN] ${message}`)
  },
  info: (message: string) => {
    console.info(`[INFO] ${message}`)
  },
  debug: (message: string) => {
    if (process.env.NODE_ENV === 'development') {
      console.debug(`[DEBUG] ${message}`)
    }
  },
}
```

#### 3.2.2 æ—¥å¿—æ”¶é›†

- åº”ç”¨æ—¥å¿—æ”¶é›†
- é”™è¯¯æ—¥å¿—è¿½è¸ª
- ç”¨æˆ·è¡Œä¸ºæ—¥å¿—
- æ€§èƒ½æ—¥å¿—åˆ†æ

## 4. å®‰å…¨ç»´æŠ¤

### 4.1 å®‰å…¨æ›´æ–°

#### 4.1.1 ä¾èµ–æ›´æ–°

```bash
# æ£€æŸ¥å®‰å…¨æ¼æ´
npm audit

# ä¿®å¤å®‰å…¨æ¼æ´
npm audit fix

# æ›´æ–°ä¾èµ–
pnpm update
```

#### 4.1.2 å®‰å…¨é…ç½®

```typescript
// å®‰å…¨å¤´é…ç½®
const securityHeaders = {
  'X-DNS-Prefetch-Control': 'on',
  'X-XSS-Protection': '1; mode=block',
  'X-Frame-Options': 'SAMEORIGIN',
  'X-Content-Type-Options': 'nosniff',
  'Referrer-Policy': 'origin-when-cross-origin',
  'Content-Security-Policy': "default-src 'self'",
}
```

### 4.2 æ•°æ®å®‰å…¨

#### 4.2.1 æ•°æ®åŠ å¯†

- å¯†ç å“ˆå¸Œå­˜å‚¨
- æ•æ„Ÿæ•°æ®åŠ å¯†
- ä¼ è¾“å±‚åŠ å¯†ï¼ˆHTTPSï¼‰
- æ•°æ®åº“è¿æ¥åŠ å¯†

#### 4.2.2 è®¿é—®æ§åˆ¶

- ç”¨æˆ·è®¤è¯éªŒè¯
- æƒé™è¾¹ç•Œæ£€æŸ¥
- APIè®¿é—®é™åˆ¶
- æ•°æ®è®¿é—®å®¡è®¡

## 5. å¼€å‘æŒ‡å—

### 5.1 å¼€å‘ç¯å¢ƒè®¾ç½®

#### 5.1.1 IDE é…ç½®

```json
// .vscode/settings.json
{
  "typescript.preferences.importModuleSpecifier": "relative",
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  }
}
```

#### 5.1.2 Git å·¥ä½œæµ

```bash
# åŠŸèƒ½å¼€å‘æµç¨‹
git checkout -b feature/new-feature
git add .
git commit -m "feat: add new feature"
git push origin feature/new-feature

# åˆ›å»º Pull Request
# ä»£ç å®¡æŸ¥
# åˆå¹¶åˆ°ä¸»åˆ†æ”¯
```

### 5.2 ä»£ç è§„èŒƒ

#### 5.2.1 å‘½åè§„èŒƒ

- **æ–‡ä»¶å‘½å**ï¼škebab-caseï¼ˆçŸ­æ¨ªçº¿åˆ†éš”ï¼‰
- **ç»„ä»¶å‘½å**ï¼šPascalCaseï¼ˆå¸•æ–¯å¡å‘½åï¼‰
- **å‡½æ•°å‘½å**ï¼šcamelCaseï¼ˆé©¼å³°å‘½åï¼‰
- **å¸¸é‡å‘½å**ï¼šUPPER_SNAKE_CASEï¼ˆå¤§å†™ä¸‹åˆ’çº¿ï¼‰

#### 5.2.2 ä»£ç ç»„ç»‡

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/           # åŸºç¡€UIç»„ä»¶
â”‚   â”œâ”€â”€ forms/        # è¡¨å•ç»„ä»¶
â”‚   â””â”€â”€ charts/       # å›¾è¡¨ç»„ä»¶
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ utils.ts      # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ validations.ts # éªŒè¯å‡½æ•°
â”‚   â””â”€â”€ constants.ts  # å¸¸é‡å®šä¹‰
â””â”€â”€ types/
    â”œâ”€â”€ api.ts        # APIç±»å‹
    â”œâ”€â”€ database.ts   # æ•°æ®åº“ç±»å‹
    â””â”€â”€ ui.ts         # UIç±»å‹
```

### 5.3 æµ‹è¯•ç­–ç•¥

#### 5.3.1 æµ‹è¯•ç±»å‹

- **å•å…ƒæµ‹è¯•**ï¼šç»„ä»¶å’Œå‡½æ•°æµ‹è¯•
- **é›†æˆæµ‹è¯•**ï¼šAPIæ¥å£æµ‹è¯•
- **ç«¯åˆ°ç«¯æµ‹è¯•**ï¼šç”¨æˆ·æµç¨‹æµ‹è¯•
- **æ€§èƒ½æµ‹è¯•**ï¼šè´Ÿè½½å’Œå‹åŠ›æµ‹è¯•

#### 5.3.2 æµ‹è¯•å·¥å…·

```bash
# å®‰è£…æµ‹è¯•ä¾èµ–
pnpm add -D jest @testing-library/react @testing-library/jest-dom

# è¿è¡Œæµ‹è¯•
pnpm test

# æµ‹è¯•è¦†ç›–ç‡
pnpm test:coverage
```

## 6. æ•…éšœæ’é™¤

### 6.1 å¸¸è§é—®é¢˜

#### 6.1.1 æ•°æ®åº“è¿æ¥é—®é¢˜

```bash
# æ£€æŸ¥æ•°æ®åº“è¿æ¥
npx prisma db pull

# é‡æ–°ç”Ÿæˆå®¢æˆ·ç«¯
npx prisma generate

# æ£€æŸ¥è¿ç§»çŠ¶æ€
npx prisma migrate status
```

#### 6.1.2 æ„å»ºé—®é¢˜

```bash
# æ¸…ç†ç¼“å­˜
rm -rf .next
rm -rf node_modules
pnpm install

# é‡æ–°æ„å»º
pnpm build
```

### 6.2 æ€§èƒ½é—®é¢˜

#### 6.2.1 æŸ¥è¯¢ä¼˜åŒ–

- æ·»åŠ æ•°æ®åº“ç´¢å¼•
- ä¼˜åŒ–æŸ¥è¯¢è¯­å¥
- ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜
- å‡å°‘N+1æŸ¥è¯¢

#### 6.2.2 å‰ç«¯ä¼˜åŒ–

- ä»£ç åˆ†å‰²
- å›¾ç‰‡ä¼˜åŒ–
- ç¼“å­˜ç­–ç•¥
- æ‡’åŠ è½½å®ç°

---

# ğŸ“ æ”¯æŒä¸è´¡çŒ®

## æŠ€æœ¯æ”¯æŒ

- ğŸ“§ é‚®ç®±ï¼šsupport@flowbalance.com
- ğŸ“– æ–‡æ¡£ï¼šæŸ¥çœ‹ `/docs` ç›®å½•
- ğŸ› é—®é¢˜åé¦ˆï¼šGitHub Issues

## ğŸ“‹ å¼€å‘è§„èŒƒä¸è´¨é‡ä¿è¯

### ğŸ”§ ä»£ç è´¨é‡å·¥å…·

é¡¹ç›®é…ç½®äº†å®Œæ•´çš„ä»£ç è´¨é‡ä¿è¯ä½“ç³»ï¼š

- **ESLint**: ä»£ç è§„èŒƒæ£€æŸ¥ï¼Œä¸¥æ ¼çš„ TypeScript è§„åˆ™
- **Prettier**: ç»Ÿä¸€çš„ä»£ç æ ¼å¼åŒ–
- **TypeScript**: ä¸¥æ ¼æ¨¡å¼ç±»å‹æ£€æŸ¥
- **Jest**: å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œè¦†ç›–ç‡è¦æ±‚ 70%
- **Husky + lint-staged**: Git hooks è‡ªåŠ¨åŒ–æ£€æŸ¥

### ğŸš€ å¼€å‘å·¥ä½œæµ

```bash
# å¼€å‘å‰æ£€æŸ¥
pnpm install                 # å®‰è£…ä¾èµ–
pnpm db:generate            # ç”Ÿæˆæ•°æ®åº“å®¢æˆ·ç«¯
pnpm db:migrate             # è¿è¡Œæ•°æ®åº“è¿ç§»

# å¼€å‘ä¸­æ£€æŸ¥
pnpm lint                   # ESLint æ£€æŸ¥
pnpm type-check            # TypeScript ç±»å‹æ£€æŸ¥
pnpm test                  # è¿è¡Œæµ‹è¯•
pnpm format:check          # æ ¼å¼æ£€æŸ¥

# è‡ªåŠ¨ä¿®å¤
pnpm lint:fix              # è‡ªåŠ¨ä¿®å¤ ESLint é”™è¯¯
pnpm format                # è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç 

# é«˜çº§å·¥å…·
node scripts/smart-lint-fix.js     # æ™ºèƒ½æ‰¹é‡ä¿®å¤
pnpm type-check:detailed           # è¯¦ç»†ç±»å‹æ£€æŸ¥æŠ¥å‘Š
```

### ğŸ“ ä»£ç è§„èŒƒè¦ç‚¹

- **ç»„ä»¶å‘½å**: PascalCase (å¦‚ `UserProfile.tsx`)
- **æ–‡ä»¶å‘½å**: kebab-case (å¦‚ `format-currency.ts`)
- **Hook å‘½å**: camelCaseï¼Œä»¥ `use` å¼€å¤´
- **ç±»å‹å®‰å…¨**: é¿å…ä½¿ç”¨ `any`ï¼Œå……åˆ†åˆ©ç”¨ TypeScript
- **æµ‹è¯•è¦†ç›–**: æ–°åŠŸèƒ½å¿…é¡»æœ‰å¯¹åº”æµ‹è¯•
- **æ³¨é‡Šè§„èŒƒ**: å¤æ‚é€»è¾‘æ·»åŠ  JSDoc æ³¨é‡Š

### ğŸ“š è¯¦ç»†æ–‡æ¡£

- **[å¼€å‘è§„èŒƒæŒ‡å—](docs/DEVELOPMENT_STANDARDS.md)**: å®Œæ•´çš„å¼€å‘è§„èŒƒå’Œæœ€ä½³å®è·µ
- **[å¿«é€Ÿå‚è€ƒ](docs/QUICK_REFERENCE.md)**: å¸¸ç”¨å‘½ä»¤å’Œæ“ä½œé€ŸæŸ¥
- **[ä»£ç å®¡æŸ¥æ¸…å•](docs/CODE_REVIEW_CHECKLIST.md)**: ä»£ç å®¡æŸ¥è¦ç‚¹
- **[é¡¹ç›®é…ç½®è¯¦è§£](docs/PROJECT_CONFIGURATION.md)**: æ‰€æœ‰é…ç½®æ–‡ä»¶è¯´æ˜

## è´¡çŒ®æŒ‡å—

### æäº¤æµç¨‹

1. **Fork é¡¹ç›®** å¹¶åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
2. **éµå¾ªè§„èŒƒ** æŒ‰ç…§å¼€å‘è§„èŒƒç¼–å†™ä»£ç 
3. **è¿è¡Œæ£€æŸ¥** ç¡®ä¿é€šè¿‡æ‰€æœ‰è´¨é‡æ£€æŸ¥
4. **ç¼–å†™æµ‹è¯•** ä¸ºæ–°åŠŸèƒ½æ·»åŠ æµ‹è¯•
5. **æäº¤ä»£ç ** ä½¿ç”¨æ¸…æ™°çš„æäº¤ä¿¡æ¯
6. **åˆ›å»º PR** å¹¶ç­‰å¾…ä»£ç å®¡æŸ¥

### æäº¤å‰æ£€æŸ¥æ¸…å•

- [ ] ä»£ç é€šè¿‡ ESLint æ£€æŸ¥ (`pnpm lint`)
- [ ] ä»£ç é€šè¿‡ TypeScript ç±»å‹æ£€æŸ¥ (`pnpm type-check`)
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ (`pnpm test`)
- [ ] ä»£ç æ ¼å¼åŒ–æ­£ç¡® (`pnpm format:check`)
- [ ] æ–°åŠŸèƒ½æœ‰å¯¹åº”æµ‹è¯•
- [ ] ç›¸å…³æ–‡æ¡£å·²æ›´æ–°

### ä»£ç å®¡æŸ¥è¦ç‚¹

- åŠŸèƒ½æ­£ç¡®æ€§å’Œè¾¹ç•Œæ¡ä»¶å¤„ç†
- TypeScript ç±»å‹å®‰å…¨
- React ç»„ä»¶è®¾è®¡å’Œæ€§èƒ½ä¼˜åŒ–
- ä¸šåŠ¡é€»è¾‘å‡†ç¡®æ€§ï¼ˆç‰¹åˆ«æ˜¯è´¢åŠ¡è®¡ç®—ï¼‰
- æµ‹è¯•è¦†ç›–ç‡å’Œè´¨é‡
- ä»£ç å¯è¯»æ€§å’Œç»´æŠ¤æ€§

## ğŸ“š æ–‡æ¡£å¯¼èˆª

### ğŸš€ å¿«é€Ÿå¼€å§‹

- **[README.md](README.md)** - é¡¹ç›®ä»‹ç»å’ŒåŸºç¡€ä½¿ç”¨æŒ‡å—
- **[å¿«é€Ÿå‚è€ƒ](docs/QUICK_REFERENCE.md)** - å¸¸ç”¨å‘½ä»¤å’Œæ“ä½œé€ŸæŸ¥è¡¨

### ğŸ³ éƒ¨ç½²æŒ‡å—

- **[GitHub è®¾ç½®æŒ‡å—](docs/GITHUB_SETUP_GUIDE.md)** - ä»é›¶å¼€å§‹çš„ GitHub ä»“åº“è®¾ç½®
- **[åˆ†æ­¥éƒ¨ç½²æŒ‡å—](docs/STEP_BY_STEP_DEPLOYMENT.md)** - è¯¦ç»†çš„å®æ“éƒ¨ç½²æµç¨‹
- **[å®Œæ•´éƒ¨ç½²æŒ‡å—](docs/DEPLOYMENT_GUIDE.md)** - å…¨é¢çš„éƒ¨ç½²æ–‡æ¡£
- **[éƒ¨ç½²æ€»ç»“](DEPLOYMENT_SUMMARY.md)** - éƒ¨ç½²æ–¹å¼å¯¹æ¯”å’Œæ€»ç»“

### âš™ï¸ CI/CD å’Œè‡ªåŠ¨åŒ–

- **[CI/CD é…ç½®æŒ‡å—](docs/CICD_CONFIGURATION.md)** - GitHub Actions æµæ°´çº¿è¯¦è§£
- **[é¡¹ç›®çŠ¶æ€](PROJECT_STATUS.md)** - åŠŸèƒ½å®Œæˆæƒ…å†µå’Œé¡¹ç›®äº®ç‚¹

### ğŸ”§ å¼€å‘æ–‡æ¡£

- **[å¼€å‘è§„èŒƒ](CODE_GUIDE_DOC/DEVELOPMENT_STANDARDS.md)** - ä»£ç è§„èŒƒå’Œæœ€ä½³å®è·µ
- **[API æ–‡æ¡£](docs/API_DOCUMENTATION.md)** - API æ¥å£è¯´æ˜
- **[æ•°æ®åº“è®¾è®¡](docs/DATABASE_DESIGN.md)** - æ•°æ®åº“ç»“æ„å’Œè®¾è®¡

### ğŸ› ï¸ å®ç”¨å·¥å…·

- **è„šæœ¬å·¥å…·**:
  - `scripts/quick-start.sh` - äº¤äº’å¼å¿«é€Ÿéƒ¨ç½²
  - `scripts/monitor.sh` - åº”ç”¨ç›‘æ§å’Œå¥åº·æ£€æŸ¥
  - `scripts/backup-data.js` - æ•°æ®å¤‡ä»½å·¥å…·
  - `scripts/release.sh` - è‡ªåŠ¨åŒ–ç‰ˆæœ¬å‘å¸ƒ
- **Makefile** - ç®€åŒ–çš„å‘½ä»¤é›†åˆ (`make help` æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤)

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦è§ LICENSE æ–‡ä»¶ã€‚

---

**Flow Balance** - ä¸“ä¸šçš„ä¸ªäººè´¢åŠ¡ç®¡ç†ç³»ç»Ÿ _è®©è´¢åŠ¡ç®¡ç†æ›´ç®€å•ã€æ›´ä¸“ä¸šã€æ›´æ™ºèƒ½_
