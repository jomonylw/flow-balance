# Calendarç»„ä»¶å¯¼èˆªæŒ‰é’®ä¿®å¤

## ğŸ¯ é—®é¢˜è¯Šæ–­

ç”¨æˆ·åé¦ˆCalendarç»„ä»¶çš„å·¦å³æŒ‰é’®æ— æ³•æ­£å¸¸ç¿»é¡µï¼Œç»è¿‡æ£€æŸ¥å‘ç°ä»¥ä¸‹é—®é¢˜ï¼š

1. âŒ **å†…è”å‡½æ•°å¤æ‚**: å·¦å³æŒ‰é’®ä½¿ç”¨å¤æ‚çš„å†…è”å‡½æ•°ï¼Œå¯èƒ½å¯¼è‡´äº‹ä»¶å¤„ç†é—®é¢˜
2. âŒ **è§†å›¾åˆ‡æ¢é€»è¾‘é”™è¯¯**: æœˆå¹´æ ‡é¢˜ç‚¹å‡»é€»è¾‘ä¸æ­£ç¡®ï¼Œæ— æ³•æ­£ç¡®åˆ‡æ¢è§†å›¾
3. âŒ **äº‹ä»¶å¤„ç†ä¸æ¸…æ™°**: ä¸åŒè§†å›¾æ¨¡å¼ä¸‹çš„å¯¼èˆªé€»è¾‘æ··åˆåœ¨ä¸€èµ·

## ğŸ”§ ä¿®å¤æ–¹æ¡ˆ

### 1. é‡æ„äº‹ä»¶å¤„ç†å‡½æ•°

#### ä¿®å¤å‰çš„é—®é¢˜ä»£ç 

```typescript
// å¤æ‚çš„å†…è”å‡½æ•°ï¼Œéš¾ä»¥è°ƒè¯•
<button
  onClick={viewMode === 'days' ? handlePrevMonth : viewMode === 'months' ? handlePrevYear : () => {
    const currentYear = getYear(currentMonth)
    const newYear = Math.floor(currentYear / 10) * 10 - 10
    setCurrentMonth(new Date(newYear, getMonth(currentMonth), 1))
  }}
>
  <ChevronLeft />
</button>
```

#### ä¿®å¤åçš„æ¸…æ™°ä»£ç 

```typescript
// ç‹¬ç«‹çš„äº‹ä»¶å¤„ç†å‡½æ•°
const handlePrevDecade = () => {
  const currentYear = getYear(currentMonth)
  const newYear = Math.floor(currentYear / 10) * 10 - 10
  setCurrentMonth(new Date(newYear, getMonth(currentMonth), 1))
}

const handleNextDecade = () => {
  const currentYear = getYear(currentMonth)
  const newYear = Math.floor(currentYear / 10) * 10 + 10
  setCurrentMonth(new Date(newYear, getMonth(currentMonth), 1))
}

const handlePrevClick = () => {
  if (viewMode === 'days') {
    handlePrevMonth()
  } else if (viewMode === 'months') {
    handlePrevYear()
  } else {
    handlePrevDecade()
  }
}

const handleNextClick = () => {
  if (viewMode === 'days') {
    handleNextMonth()
  } else if (viewMode === 'months') {
    handleNextYear()
  } else {
    handleNextDecade()
  }
}

// ç®€æ´çš„æŒ‰é’®å®ç°
<button onClick={handlePrevClick}>
  <ChevronLeft />
</button>
```

### 2. ä¿®å¤è§†å›¾åˆ‡æ¢é€»è¾‘

#### ä¿®å¤å‰çš„é”™è¯¯é€»è¾‘

```typescript
// é”™è¯¯ï¼šåœ¨daysè§†å›¾æ—¶æ— æ³•è¿›å…¥monthsè§†å›¾
onClick={() => setViewMode(viewMode === 'years' ? 'months' : 'years')}
```

#### ä¿®å¤åçš„æ­£ç¡®é€»è¾‘

```typescript
// æ­£ç¡®ï¼šæŒ‰ç…§ days â†’ months â†’ years çš„é¡ºåºåˆ‡æ¢
onClick={() => {
  if (viewMode === 'days') {
    setViewMode('months')      // æ—¥æœŸè§†å›¾ â†’ æœˆä»½è§†å›¾
  } else if (viewMode === 'months') {
    setViewMode('years')       // æœˆä»½è§†å›¾ â†’ å¹´ä»½è§†å›¾
  } else {
    setViewMode('months')      // å¹´ä»½è§†å›¾ â†’ æœˆä»½è§†å›¾
  }
}}
```

### 3. å¯¼èˆªåŠŸèƒ½å®Œæ•´å®ç°

#### ä¸‰ç§è§†å›¾æ¨¡å¼çš„å¯¼èˆªé€»è¾‘

##### æ—¥æœŸè§†å›¾ (days)

```typescript
// å·¦å³æŒ‰é’®ï¼šåˆ‡æ¢æœˆä»½
handlePrevMonth() // ä¸Šä¸ªæœˆ
handleNextMonth() // ä¸‹ä¸ªæœˆ

// ç‚¹å‡»æ ‡é¢˜ï¼šè¿›å…¥æœˆä»½é€‰æ‹©
setViewMode('months')
```

##### æœˆä»½è§†å›¾ (months)

```typescript
// å·¦å³æŒ‰é’®ï¼šåˆ‡æ¢å¹´ä»½
handlePrevYear() // ä¸Šä¸€å¹´
handleNextYear() // ä¸‹ä¸€å¹´

// ç‚¹å‡»æ ‡é¢˜ï¼šè¿›å…¥å¹´ä»½é€‰æ‹©
setViewMode('years')

// é€‰æ‹©æœˆä»½ï¼šè¿”å›æ—¥æœŸè§†å›¾
setCurrentMonth(new Date(year, selectedMonth, 1))
setViewMode('days')
```

##### å¹´ä»½è§†å›¾ (years)

```typescript
// å·¦å³æŒ‰é’®ï¼šåˆ‡æ¢åå¹´
handlePrevDecade() // ä¸Šä¸ªåå¹´ (2010-2019 â†’ 2000-2009)
handleNextDecade() // ä¸‹ä¸ªåå¹´ (2010-2019 â†’ 2020-2029)

// ç‚¹å‡»æ ‡é¢˜ï¼šè¿”å›æœˆä»½è§†å›¾
setViewMode('months')

// é€‰æ‹©å¹´ä»½ï¼šè¿”å›æœˆä»½è§†å›¾
setCurrentMonth(new Date(selectedYear, currentMonth, 1))
setViewMode('months')
```

## ğŸ“Š åŠŸèƒ½éªŒè¯

### 1. åˆ›å»ºæµ‹è¯•é¡µé¢

åˆ›å»ºäº†ä¸“é—¨çš„æµ‹è¯•é¡µé¢ `/test-calendar` æ¥éªŒè¯ä¿®å¤æ•ˆæœï¼š

```typescript
// åŸºç¡€æ—¥å†æµ‹è¯•
<Calendar
  value={selectedDate}
  onChange={setSelectedDate}
  showYearMonthSelector={true}
/>

// å¸¦é™åˆ¶çš„æ—¥å†æµ‹è¯•
<Calendar
  value={selectedDate}
  onChange={setSelectedDate}
  minDate={new Date('2024-01-01')}
  maxDate={new Date('2024-12-31')}
  showYearMonthSelector={true}
/>

// ç®€åŒ–æ—¥å†æµ‹è¯•
<Calendar
  value={selectedDate}
  onChange={setSelectedDate}
  showYearMonthSelector={false}
/>
```

### 2. æµ‹è¯•ç”¨ä¾‹

#### å·¦å³æŒ‰é’®åŠŸèƒ½æµ‹è¯•

```
âœ… æ—¥æœŸè§†å›¾: å·¦å³æŒ‰é’®åˆ‡æ¢æœˆä»½
   - ç‚¹å‡»å·¦æŒ‰é’® â†’ æ˜¾ç¤ºä¸Šä¸ªæœˆ
   - ç‚¹å‡»å³æŒ‰é’® â†’ æ˜¾ç¤ºä¸‹ä¸ªæœˆ

âœ… æœˆä»½è§†å›¾: å·¦å³æŒ‰é’®åˆ‡æ¢å¹´ä»½
   - ç‚¹å‡»å·¦æŒ‰é’® â†’ æ˜¾ç¤ºä¸Šä¸€å¹´çš„æœˆä»½
   - ç‚¹å‡»å³æŒ‰é’® â†’ æ˜¾ç¤ºä¸‹ä¸€å¹´çš„æœˆä»½

âœ… å¹´ä»½è§†å›¾: å·¦å³æŒ‰é’®åˆ‡æ¢åå¹´
   - ç‚¹å‡»å·¦æŒ‰é’® â†’ æ˜¾ç¤ºä¸Šä¸ªåå¹´ (2010-2019 â†’ 2000-2009)
   - ç‚¹å‡»å³æŒ‰é’® â†’ æ˜¾ç¤ºä¸‹ä¸ªåå¹´ (2010-2019 â†’ 2020-2029)
```

#### è§†å›¾åˆ‡æ¢åŠŸèƒ½æµ‹è¯•

```
âœ… æ—¥æœŸè§†å›¾ â†’ æœˆä»½è§†å›¾
   - ç‚¹å‡»æœˆå¹´æ ‡é¢˜ â†’ è¿›å…¥æœˆä»½é€‰æ‹©ç•Œé¢

âœ… æœˆä»½è§†å›¾ â†’ å¹´ä»½è§†å›¾
   - ç‚¹å‡»å¹´ä»½æ ‡é¢˜ â†’ è¿›å…¥å¹´ä»½é€‰æ‹©ç•Œé¢

âœ… å¹´ä»½è§†å›¾ â†’ æœˆä»½è§†å›¾
   - ç‚¹å‡»å¹´ä»½æ ‡é¢˜ â†’ è¿”å›æœˆä»½é€‰æ‹©ç•Œé¢
   - é€‰æ‹©å¹´ä»½ â†’ è‡ªåŠ¨è¿”å›æœˆä»½è§†å›¾

âœ… æœˆä»½è§†å›¾ â†’ æ—¥æœŸè§†å›¾
   - é€‰æ‹©æœˆä»½ â†’ è‡ªåŠ¨è¿”å›æ—¥æœŸè§†å›¾
```

#### æ—¥æœŸé™åˆ¶åŠŸèƒ½æµ‹è¯•

```
âœ… æœ€å°æ—¥æœŸé™åˆ¶
   - å¯¼èˆªåˆ°minDateä¹‹å‰çš„æœˆä»½è¢«é˜»æ­¢
   - minDateä¹‹å‰çš„æ—¥æœŸæ˜¾ç¤ºä¸ºç¦ç”¨çŠ¶æ€

âœ… æœ€å¤§æ—¥æœŸé™åˆ¶
   - å¯¼èˆªåˆ°maxDateä¹‹åçš„æœˆä»½è¢«é˜»æ­¢
   - maxDateä¹‹åçš„æ—¥æœŸæ˜¾ç¤ºä¸ºç¦ç”¨çŠ¶æ€

âœ… è¾¹ç•Œå¤„ç†
   - åœ¨æ—¥æœŸèŒƒå›´è¾¹ç•Œå¤„ï¼Œç›¸åº”çš„å¯¼èˆªæŒ‰é’®è¢«é™åˆ¶
```

## ğŸ¯ ä¿®å¤æ•ˆæœ

### ä¿®å¤å‰çš„é—®é¢˜

```
âŒ ç‚¹å‡»å·¦å³æŒ‰é’®æ— å“åº”
âŒ è§†å›¾åˆ‡æ¢é€»è¾‘é”™è¯¯
âŒ æ— æ³•æ­£å¸¸å¯¼èˆªåˆ°å…¶ä»–æœˆä»½/å¹´ä»½
âŒ ä»£ç éš¾ä»¥è°ƒè¯•å’Œç»´æŠ¤
```

### ä¿®å¤åçš„æ•ˆæœ

```
âœ… å·¦å³æŒ‰é’®å“åº”æ­£å¸¸
âœ… è§†å›¾åˆ‡æ¢é€»è¾‘æ­£ç¡®
âœ… å¯ä»¥æ­£å¸¸å¯¼èˆªåˆ°ä»»æ„æœˆä»½/å¹´ä»½
âœ… ä»£ç æ¸…æ™°æ˜“ç»´æŠ¤
âœ… æ”¯æŒæ—¥æœŸèŒƒå›´é™åˆ¶
âœ… ä¸‰ç§è§†å›¾æ¨¡å¼å®Œæ•´æ”¯æŒ
```

## ğŸ›¡ï¸ æŠ€æœ¯ä¼˜åŠ¿

### 1. ä»£ç å¯ç»´æŠ¤æ€§

```typescript
// æ¸…æ™°çš„å‡½æ•°å‘½å
handlePrevClick() // å¤„ç†å·¦æŒ‰é’®ç‚¹å‡»
handleNextClick() // å¤„ç†å³æŒ‰é’®ç‚¹å‡»
handlePrevDecade() // å¤„ç†åå¹´å‘å‰å¯¼èˆª
handleNextDecade() // å¤„ç†åå¹´å‘åå¯¼èˆª
```

### 2. é€»è¾‘åˆ†ç¦»

```typescript
// æ¯ç§è§†å›¾æ¨¡å¼æœ‰ç‹¬ç«‹çš„å¤„ç†é€»è¾‘
if (viewMode === 'days') {
  // æ—¥æœŸè§†å›¾é€»è¾‘
} else if (viewMode === 'months') {
  // æœˆä»½è§†å›¾é€»è¾‘
} else {
  // å¹´ä»½è§†å›¾é€»è¾‘
}
```

### 3. é”™è¯¯å¤„ç†

```typescript
// æ—¥æœŸèŒƒå›´æ£€æŸ¥
const handlePrevMonth = () => {
  const newMonth = subMonths(currentMonth, 1)
  if (minDate && newMonth < startOfMonth(minDate)) return
  setCurrentMonth(newMonth)
}
```

### 4. ç”¨æˆ·ä½“éªŒ

```typescript
// ç›´è§‚çš„å¯¼èˆªä½“éªŒ
- å·¦å³æŒ‰é’®ï¼šæ—¶é—´è½´å¯¼èˆª
- æ ‡é¢˜ç‚¹å‡»ï¼šè§†å›¾å±‚çº§åˆ‡æ¢
- è‡ªåŠ¨è¿”å›ï¼šé€‰æ‹©åå›åˆ°åˆé€‚çš„è§†å›¾
```

## ğŸ”„ ä½¿ç”¨æŒ‡å—

### è®¿é—®æµ‹è¯•é¡µé¢

```
http://localhost:3002/test-calendar
```

### æµ‹è¯•æ­¥éª¤

1. **åŸºç¡€å¯¼èˆªæµ‹è¯•**

   - åœ¨æ—¥æœŸè§†å›¾ç‚¹å‡»å·¦å³æŒ‰é’®ï¼Œè§‚å¯Ÿæœˆä»½åˆ‡æ¢
   - ç‚¹å‡»æœˆå¹´æ ‡é¢˜è¿›å…¥æœˆä»½è§†å›¾
   - åœ¨æœˆä»½è§†å›¾ç‚¹å‡»å·¦å³æŒ‰é’®ï¼Œè§‚å¯Ÿå¹´ä»½åˆ‡æ¢
   - ç‚¹å‡»å¹´ä»½æ ‡é¢˜è¿›å…¥å¹´ä»½è§†å›¾
   - åœ¨å¹´ä»½è§†å›¾ç‚¹å‡»å·¦å³æŒ‰é’®ï¼Œè§‚å¯Ÿåå¹´åˆ‡æ¢

2. **è§†å›¾åˆ‡æ¢æµ‹è¯•**

   - æµ‹è¯• æ—¥æœŸ â†’ æœˆä»½ â†’ å¹´ä»½ çš„åˆ‡æ¢æµç¨‹
   - æµ‹è¯•é€‰æ‹©åçš„è‡ªåŠ¨è¿”å›åŠŸèƒ½

3. **æ—¥æœŸé™åˆ¶æµ‹è¯•**
   - åœ¨å¸¦é™åˆ¶çš„æ—¥å†ä¸­æµ‹è¯•è¾¹ç•Œå¯¼èˆª
   - éªŒè¯è¶…å‡ºèŒƒå›´çš„æ—¥æœŸæ˜¯å¦è¢«æ­£ç¡®ç¦ç”¨

## ğŸ‰ æ€»ç»“

é€šè¿‡è¿™æ¬¡ä¿®å¤ï¼ŒCalendarç»„ä»¶çš„å¯¼èˆªåŠŸèƒ½å¾—åˆ°äº†å…¨é¢æ”¹å–„ï¼š

1. **åŠŸèƒ½å®Œæ•´**: ä¸‰ç§è§†å›¾æ¨¡å¼çš„å¯¼èˆªéƒ½æ­£å¸¸å·¥ä½œ
2. **é€»è¾‘æ¸…æ™°**: ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤
3. **ç”¨æˆ·ä½“éªŒ**: ç›´è§‚çš„å¯¼èˆªäº¤äº’ï¼Œç¬¦åˆç”¨æˆ·æœŸæœ›
4. **é”™è¯¯å¤„ç†**: å®Œå–„çš„è¾¹ç•Œæ£€æŸ¥å’Œæ—¥æœŸé™åˆ¶
5. **æµ‹è¯•è¦†ç›–**: æä¾›å®Œæ•´çš„æµ‹è¯•é¡µé¢å’Œæµ‹è¯•ç”¨ä¾‹

ç°åœ¨Calendarç»„ä»¶å¯ä»¥åœ¨DateInputå’ŒSmartPasteCellä¸­æ­£å¸¸ä½¿ç”¨ï¼Œä¸ºç”¨æˆ·æä¾›æµç•…çš„æ—¥æœŸé€‰æ‹©ä½“éªŒï¼
